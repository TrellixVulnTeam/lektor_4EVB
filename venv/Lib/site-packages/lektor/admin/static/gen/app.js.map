{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:////home/joe/wrkspc/lktr/lektor/lektor/translations sync \\.json$","webpack:///./js/bootstrap-extras.jsx","webpack:///./js/components/BaseComponent.jsx","webpack:///./js/components/BreadCrumbs.jsx","webpack:///./js/components/Component.jsx","webpack:///./js/components/DialogSlot.jsx","webpack:///./js/components/Link.jsx","webpack:///./js/components/RecordComponent.jsx","webpack:///./js/components/ServerStatus.jsx","webpack:///./js/components/Sidebar.jsx","webpack:///./js/components/SlideDialog.jsx","webpack:///./js/components/ToggleGroup.jsx","webpack:///./js/dialogSystem.jsx","webpack:///./js/dialogs/Refresh.jsx","webpack:///./js/dialogs/errorDialog.jsx","webpack:///./js/dialogs/findFiles.jsx","webpack:///./js/dialogs/publish.jsx","webpack:///./js/events.jsx","webpack:///./js/hub.jsx","webpack:///./js/i18n.jsx","webpack:///./js/main.jsx","webpack:///./js/metaformat.jsx","webpack:///./js/richPromise.jsx","webpack:///./js/slugify.js","webpack:///./js/userLabel.jsx","webpack:///./js/utils.jsx","webpack:///./js/views/AddAttachmentPage.jsx","webpack:///./js/views/AddChildPage.jsx","webpack:///./js/views/App.jsx","webpack:///./js/views/DeletePage.jsx","webpack:///./js/views/EditPage.jsx","webpack:///./js/views/PreviewPage.jsx","webpack:///./js/widgets.jsx","webpack:///./js/widgets/fakeWidgets.jsx","webpack:///./js/widgets/flowWidget.jsx","webpack:///./js/widgets/mixins.jsx","webpack:///./js/widgets/multiWidgets.jsx","webpack:///./js/widgets/primitiveWidgets.jsx"],"names":["$","document","ready","click","target","attr","isActive","is","toggleClass","BaseComponent","React","Component","BreadCrumbs","props","state","recordPathInfo","_onKeyPress","bind","updateCrumbs","window","addEventListener","prevProps","prevState","match","params","path","removeEventListener","getRecordPath","setState","loadData","makeRichPromise","then","resp","segments","event","which","isMetaKey","preventDefault","dialogSystem","showDialog","FindFiles","e","alt","getRecordAlt","url","location","href","getCanonicalUrl","Refresh","Publish","_onFindFiles","i18n","trans","_onPublish","_onRefresh","_onCloseClick","crumbs","page","lastItem","map","item","urlPath","getUrlRecordPathWithAlt","label","label_i18n","className","exists","id","adminPath","getPathToAdminPage","children","can_have_children","renderGlobalActions","RecordComponent","name","parameters","substr","$LEKTOR_CONFIG","admin_root","replace","m","key","history","push","DialogSlot","currentDialog","currentDialogOptions","onDialogChanged","hub","subscribe","DialogChangedEvent","unsubscribe","dialog","dialogOptions","notifyDialogInstance","scrollTo","ref","initDialogInstance","LektorLink","to","propTypes","PropTypes","string","getRecordPathAndAlt","items","split","urlToFsPath","newPath","newAlt","undefined","rv","fsToUrlPath","getParentFsPath","ServerStatus","serverIsUp","projectId","intervalId","onInterval","setInterval","clearInterval","project_id","getBrowseButtonTitle","platform","getPlatform","CHILDREN_PER_PAGE","ChildPosCache","memo","record","i","length","unshift","childCount","Math","min","ceil","Sidebar","_getInitialState","childPosCache","onAttachmentsChanged","recordAttachments","recordChildren","recordAlts","canHaveAttachments","canHaveChildren","isAttachment","canBeDeleted","recordExists","lastRecordRequest","childrenPage","_updateRecordInfo","AttachmentsChangedEvent","recordPath","alts","sort","a","b","nameA","is_primary","name_i18n","nameB","attachments","can_have_attachments","is_attachment","can_be_deleted","getPosition","apiRequest","data","method","okay","alert","links","deleteLink","fsOpen","title","primary_overlay","pages","goToPage","diff","newPage","rememberPosition","slice","child","renderChildPagination","atch","type","sections","renderPageActions","renderAlts","renderChildActions","renderAttachmentActions","SlideDialog","closeOnEscape","dismissDialog","hasCloseButton","bool","ToggleGroup","isVisible","defaultVisibility","groupTitle","otherProps","toggle","DialogSystem","_dialogInstance","options","preventNavigation","emit","currentState","isSafeToNavigate","progress","onRefresh","onCancel","ErrorDialog","error","code","onClose","object","query","currentSelection","results","refs","q","focus","value","lang","currentLanguage","sel","max","onActiveItem","index","transitionToAdminPage","result","idx","parents","selectItem","onInputChange","onInputKey","renderResults","servers","activeTarget","log","syncDialog","nextProps","node","scrollTop","scrollHeight","isSafeToPublish","_beginBuild","_beginPublish","es","EventSource","getApiUrl","encodeURIComponent","JSON","parse","close","concat","msg","server","short_target","join","onSelectServer","onPublish","Event","Object","getPrototypeOf","constructor","getEventType","RecordEvent","attachmentsAdded","attachmentsRemoved","Hub","_subscriptions","callback","subs","splice","forEach","console","loadTranslations","ctx","require","keys","langIdMatch","translations","setLanguageFromLocale","locale","toLowerCase","en","BadRoute","Main","EditPage","DeletePage","PreviewPage","AddChildPage","AddAttachmentPage","dash","getElementById","ReactDOM","render","lineIsDashes","line","Array","processBuf","buf","lines","lastLine","tokenize","wantNewline","flushItem","bits","shift","firstBit","serialize","blocks","pop","arr","bringUpDialog","dialogIsOpen","fallback","Promise","hasRejectionHandler","onFulfilled","onRejected","call","userLabel","format","inputConfig","iconData","isValidUrl","stripLeadingSlash","stripTrailingSlash","addToSet","originalSet","removeFromSet","off","localPath","site_root","flipSetValue","urlPathsConsideredEqual","navigator","appVersion","indexOf","metaKey","ctrlKey","fsPath","fsPathFromAdminObservedPath","base","createPromise","resolve","reject","jQuery","ajax","done","fail","json","stringify","contentType","newAttachmentInfo","currentFiles","isUploading","currentProgress","file","newProgress","round","loaded","total","buckets","bucket","stored_filename","files","prototype","formData","FormData","append","xhr","XMLHttpRequest","open","onload","onUploadComplete","responseText","upload","onprogress","onUploadProgress","send","nai","renderCurrentFiles","display","onFileSelected","uploadFile","getGoodDefaultModel","models","choices","newChildInfo","selectedModel","implied_model","available_models","primary","obj","model","localeCompare","slugify","primary_field","errMsg","text","getImpliedId","_model","primaryField","getPrimaryField","valid_id","fields","getAvailableModels","onModelSelected","addField","field","placeholder","Widget","getWidgetComponentWithFallback","deserializeValue","onValueChange","widget","nci","renderFields","createRecord","Header","App","fullPath","recordInfo","deleteMasterRecord","isPrimary","parent","targetPath","delete_master","getParentRecordPath","ri","elements","altInfo","altCount","child_count","onDeleteAllAltsChange","deleteRecord","cancelDelete","recordData","recordDataModel","hasPendingChanges","setFieldValue","form","createRef","syncEditor","current","reportValidity","saveChanges","datamodel","record_info","rd","isIllegalField","serializeValue","newData","getValues","slug_format","default_template","implied_attachment_type","getValueForField","getPlaceholderForField","alts_enabled","deleteButton","filter","f","renderFormField","pageUrl","pageUrlFor","syncState","getInitialState","recordUrl","frame","iframe","intendedPath","getIntendedPath","framePath","getFramePath","src","onFrameNavigated","frameLocation","contentWindow","pathname","url_path","widgetComponents","SingleLineTextInputWidget","MultiLineTextInputWidget","datepicker","DateInputWidget","integer","IntegerInputWidget","FloatInputWidget","checkbox","BooleanInputWidget","UrlInputWidget","slug","SlugInputWidget","flow","FlowWidget","checkboxes","CheckboxesInputWidget","select","SelectInputWidget","LineWidget","SpacingWidget","InfoWidget","HeadingWidget","FallbackWidget","widgetPropTypes","FieldBox","disabled","onChange","getFieldColumns","innerClassName","isFakeWidget","description","description_i18n","hide_label","any","func","getWidgetComponent","widthSpec","width","parseInt","processFields","rows","currentColumns","row","columns","getFieldRows","normalFields","systemFields","FieldRows","renderFunc","normalRows","systemRows","heading_i18n","parseFlowFormat","block","blockStart","serializeFlowFormat","blockName","deserializeFlowBlock","flowBlockModel","localId","rawData","metaformat","serializeFlowBlock","flockBlockModel","offset","newIndex","newValue","confirm","flowblocks","blockIds","newBlockId","collapsed","blockInfo","toggleBlock","moveBlock","removeBlock","addBlockButtons","flowblock_order","button_label","addNewBlock","renderBlocks","blockId","flowBlock","PureComponent","getInputClass","size","checkboxIsActive","onChangeHandler","checked","x","isTrue","isValidDate","year","month","day","date","Date","getFullYear","getMonth","getDate","InputWidgetBase","postprocessValue","inputAddon","inputType","validate","help","failure","setValidity","el","setCustomValidity","valClassName","addon","configuredAddon","addon_label_i18n","postprocessSlug","postprocessInteger","validateInteger","postprocessFloat","validateFloat","postprocessDate","validateDate","validateUrl","recalculateSize","isInAutoResizeMode","ta","getComputedStyle","s","getPropertyValue","updateScrollPosition","activeElement","oldScrollTop","documentElement","body","oldHeight","offsetHeight","style","height","newHeight","scrollLeft","overflow","resize","indeterminate","checkbox_label_i18n"],"mappings":";QAAA;QACA;QACA;QACA;QACA;;QAEA;QACA;QACA;QACA,QAAQ,oBAAoB;QAC5B;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA,iBAAiB,4BAA4B;QAC7C;QACA;QACA,kBAAkB,2BAA2B;QAC7C;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;;QAEA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;;;QAGA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA,0CAA0C,gCAAgC;QAC1E;QACA;;QAEA;QACA;QACA;QACA,wDAAwD,kBAAkB;QAC1E;QACA,iDAAiD,cAAc;QAC/D;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,yCAAyC,iCAAiC;QAC1E,gHAAgH,mBAAmB,EAAE;QACrI;QACA;;QAEA;QACA;QACA;QACA,2BAA2B,0BAA0B,EAAE;QACvD,iCAAiC,eAAe;QAChD;QACA;QACA;;QAEA;QACA,sDAAsD,+DAA+D;;QAErH;QACA;;QAEA;QACA;QACA;QACA;QACA,gBAAgB,uBAAuB;QACvC;;;QAGA;QACA;QACA;QACA;;;;;;;;;;;;ACvJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AClCA;AAAA;AAAA;AAA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A;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACzZA;AAAA;AAAA;AAAA;AAAA;;AAEA;AACA;AAEA,IAAMqS,SAAS,GAAG;AAEhB;AACAC,QAHgB,kBAGRC,WAHQ,EAGK;AACnB,QAAItQ,KAAK,GAAG,IAAZ;;AACA,QAAI,OAAOsQ,WAAP,KAAuB,QAA3B,EAAqC;AACnCtQ,WAAK,GAAGsQ,WAAR;AACD,KAFD,MAEO;AACLtQ,WAAK,GAAGZ,6CAAI,CAACC,KAAL,CAAWiR,WAAX,CAAR;AACD;;AACD,QAAI,CAACtQ,KAAL,EAAY;AACV,0BAAO;AAAM,iBAAS,EAAC;AAAhB,QAAP;AACD;;AAED,QAAMuQ,QAAQ,GAAGvQ,KAAK,CAACxC,KAAN,CAAY,sCAAZ,CAAjB,CAXmB,CAWkD;;AACrE,QAAI+S,QAAJ,EAAc;AACZ,UAAIrQ,SAAS,GAAG,WAAWqQ,QAAQ,CAAC,CAAD,CAAnC;;AACA,UAAI,CAACA,QAAQ,CAAC,CAAD,CAAR,IAAe,EAAhB,EAAoB/S,KAApB,CAA0B,YAA1B,CAAJ,EAA6C;AAC3C0C,iBAAS,IAAI,gBAAgBqQ,QAAQ,C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","file":"app.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([\"./js/main.jsx\",\"vendor\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","var map = {\n\t\"./ca.json\": \"../../translations/ca.json\",\n\t\"./de.json\": \"../../translations/de.json\",\n\t\"./en.json\": \"../../translations/en.json\",\n\t\"./es.json\": \"../../translations/es.json\",\n\t\"./fr.json\": \"../../translations/fr.json\",\n\t\"./it.json\": \"../../translations/it.json\",\n\t\"./ja.json\": \"../../translations/ja.json\",\n\t\"./ko.json\": \"../../translations/ko.json\",\n\t\"./nl.json\": \"../../translations/nl.json\",\n\t\"./pl.json\": \"../../translations/pl.json\",\n\t\"./pt.json\": \"../../translations/pt.json\",\n\t\"./ru.json\": \"../../translations/ru.json\",\n\t\"./zh.json\": \"../../translations/zh.json\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"../../translations sync recursive \\\\.json$\";","import $ from 'jquery'\n\n$(document).ready(function () {\n  $('[data-toggle=offcanvas]').click(function () {\n    const target = $($(this).attr('data-target') || '.block-offcanvas')\n    const isActive = target.is('.active')\n    target.toggleClass('active', !isActive)\n    $(this).toggleClass('active', !isActive)\n  })\n})\n","// the base component.  This really should not exist in the first place\n// but react is a bit meh when it comes to what's on the base component\n// which breaks super.  This is why we do this here.  Note that this is\n// also used by the standalone admin UI app.\n\n'use strict'\n\nimport React from 'react'\n\nclass BaseComponent extends React.Component {\n  componentDidMount () {\n  }\n\n  componentWillUnmount () {\n  }\n\n  componentDidUpdate () {\n  }\n}\n\nexport default BaseComponent\n","'use strict'\n\nimport React from 'react'\nimport RecordComponent from './RecordComponent'\nimport Link from './Link'\nimport { loadData, isMetaKey, getCanonicalUrl } from '../utils'\nimport i18n from '../i18n'\nimport dialogSystem from '../dialogSystem'\nimport FindFiles from '../dialogs/findFiles'\nimport Publish from '../dialogs/publish'\nimport Refresh from '../dialogs/Refresh'\nimport makeRichPromise from '../richPromise'\n\nclass BreadCrumbs extends RecordComponent {\n  constructor (props) {\n    super(props)\n    this.state = {\n      recordPathInfo: null\n    }\n    this._onKeyPress = this._onKeyPress.bind(this)\n  }\n\n  componentDidMount () {\n    super.componentDidMount()\n    this.updateCrumbs()\n    window.addEventListener('keydown', this._onKeyPress)\n  }\n\n  componentDidUpdate (prevProps, prevState) {\n    super.componentDidUpdate(prevProps, prevState)\n    if (prevProps.match.params.path !== this.props.match.params.path) {\n      this.updateCrumbs()\n    }\n  }\n\n  componentWillUnmount () {\n    window.removeEventListener('keydown', this._onKeyPress)\n  }\n\n  updateCrumbs () {\n    const path = this.getRecordPath()\n    if (path === null) {\n      this.setState({\n        recordPathInfo: null\n      })\n      return\n    }\n\n    loadData('/pathinfo', { path: path }, null, makeRichPromise)\n      .then((resp) => {\n        this.setState({\n          recordPathInfo: {\n            path: path,\n            segments: resp.segments\n          }\n        })\n      })\n  }\n\n  _onKeyPress (event) {\n    // meta+g is open find files\n    if (event.which === 71 && isMetaKey(event)) {\n      event.preventDefault()\n      dialogSystem.showDialog(FindFiles)\n    }\n  }\n\n  _onCloseClick (e) {\n    loadData('/previewinfo', {\n      path: this.getRecordPath(),\n      alt: this.getRecordAlt()\n    }, null, makeRichPromise)\n      .then((resp) => {\n        if (resp.url === null) {\n          window.location.href = getCanonicalUrl('/')\n        } else {\n          window.location.href = getCanonicalUrl(resp.url)\n        }\n      })\n  }\n\n  _onFindFiles (e) {\n    dialogSystem.showDialog(FindFiles)\n  }\n\n  _onRefresh (e) {\n    dialogSystem.showDialog(Refresh)\n  }\n\n  _onPublish (e) {\n    dialogSystem.showDialog(Publish)\n  }\n\n  renderGlobalActions () {\n    return (\n      <div className='btn-group'>\n        <button\n          className='btn btn-default' onClick={\n            this._onFindFiles.bind(this)\n          } title={i18n.trans('FIND_FILES')}\n        >\n          <i className='fa fa-search fa-fw' />\n        </button>\n        <button\n          className='btn btn-default' onClick={\n            this._onPublish.bind(this)\n          } title={i18n.trans('PUBLISH')}\n        >\n          <i className='fa fa-cloud-upload fa-fw' />\n        </button>\n        <button\n          className='btn btn-default' onClick={\n            this._onRefresh.bind(this)\n          } title={i18n.trans('REFRESH_BUILD')}\n        >\n          <i className='fa fa-refresh fa-fw' />\n        </button>\n        <button\n          className='btn btn-default' onClick={\n            this._onCloseClick.bind(this)\n          } title={i18n.trans('RETURN_TO_WEBSITE')}\n        >\n          <i className='fa fa-eye fa-fw' />\n        </button>\n      </div>\n    )\n  }\n\n  render () {\n    let crumbs = []\n    const target = this.props.match.params.page === 'preview' ? '.preview' : '.edit'\n    let lastItem = null\n\n    if (this.state.recordPathInfo != null) {\n      crumbs = this.state.recordPathInfo.segments.map((item) => {\n        const urlPath = this.getUrlRecordPathWithAlt(item.path)\n        let label = item.label_i18n ? i18n.trans(item.label_i18n) : item.label\n        let className = 'record-crumb'\n\n        if (!item.exists) {\n          label = item.id\n          className += ' missing-record-crumb'\n        }\n        lastItem = item\n\n        const adminPath = this.getPathToAdminPage(target, { path: urlPath })\n\n        return (\n          <li key={item.path} className={className}>\n            <Link to={adminPath}>{label}</Link>\n          </li>\n        )\n      })\n    } else {\n      crumbs = (\n        <li>\n          <Link to={this.getPathToAdminPage('.edit', { path: 'root' })}>\n            {i18n.trans('BACK_TO_OVERVIEW')}\n          </Link>\n        </li>\n      )\n    }\n\n    return (\n      <div className='breadcrumbs'>\n        <ul className='breadcrumb container'>\n          {this.props.children}\n          {crumbs}\n          {lastItem && lastItem.can_have_children ? (\n            <li className='new-record-crumb'>\n              <Link to={this.getPathToAdminPage('.add-child', {\n                path: this.getUrlRecordPathWithAlt(\n                  lastItem.path)\n              })}\n              >+\n              </Link>\n            </li>\n          ) : null}\n          {' ' /* this space is needed for chrome ... */}\n          <li className='meta'>\n            {this.renderGlobalActions()}\n          </li>\n        </ul>\n      </div>\n    )\n  }\n}\n\nexport default BreadCrumbs\n","'use strict'\n\nimport BaseComponent from './BaseComponent'\n\nclass Component extends BaseComponent {\n  /* helper that can generate a path to a rule */\n  getPathToAdminPage (name, params) {\n    const parameters = { ...this.props.match.params, ...params }\n    if (name !== null) {\n      if (name.substr(0, 1) === '.') {\n        parameters.page = name.substr(1)\n      } else {\n        parameters.page = name\n      }\n    }\n\n    return `${$LEKTOR_CONFIG.admin_root}/:path/:page`.replace(/:[a-zA-Z]+/g, (m) => {\n      const key = m.substr(1)\n      return parameters[key]\n    })\n  }\n\n  /* helper to transition to a specific page */\n  transitionToAdminPage (name, params) {\n    const path = this.getPathToAdminPage(name, params)\n    this.props.history.push(path)\n  }\n}\n\nexport default Component\n","'use strict'\n\nimport React from 'react'\nimport dialogSystem from '../dialogSystem'\nimport { DialogChangedEvent } from '../events'\nimport hub from '../hub'\n\nclass DialogSlot extends React.Component {\n  constructor (props) {\n    super(props)\n    this.state = {\n      currentDialog: null,\n      currentDialogOptions: null\n    }\n    this.onDialogChanged = this.onDialogChanged.bind(this)\n  }\n\n  componentDidMount () {\n    hub.subscribe(DialogChangedEvent, this.onDialogChanged)\n  }\n\n  componentWillUnmount () {\n    hub.unsubscribe(DialogChangedEvent, this.onDialogChanged)\n  }\n\n  onDialogChanged (event) {\n    this.setState({\n      currentDialog: event.dialog,\n      currentDialogOptions: event.dialogOptions || {}\n    })\n  }\n\n  initDialogInstance (dialog) {\n    dialogSystem.notifyDialogInstance(dialog)\n    window.scrollTo(0, 0)\n  }\n\n  render () {\n    let dialog = null\n    if (this.state.currentDialog) {\n      dialog = (\n        <this.state.currentDialog\n          ref={(ref) => this.initDialogInstance(ref)}\n          {...this.props}\n          {...this.state.currentDialogOptions}\n        />)\n    } else {\n      dialogSystem.notifyDialogInstance(null)\n    }\n\n    if (!dialog) {\n      return null\n    }\n\n    return (\n      <div className='dialog-slot'>\n        {dialog}\n        <div className='interface-protector' />\n      </div>\n    )\n  }\n}\n\nexport default DialogSlot\n","'use strict'\n\nimport PropTypes from 'prop-types'\nimport React from 'react'\nimport { NavLink } from 'react-router-dom'\n\nfunction LektorLink (props) {\n  let path = props.to\n  if (path.substr(0, 1) !== '/') {\n    path = $LEKTOR_CONFIG.admin_root + '/' + path\n  }\n  return (\n    <NavLink to={path} activeClassName='active'>\n      {props.children}\n    </NavLink>\n  )\n}\n\nLektorLink.propTypes = {\n  to: PropTypes.string\n}\n\nexport default LektorLink\n","'use strict'\n\nimport Component from './Component'\nimport { getParentFsPath, urlToFsPath, fsToUrlPath } from '../utils'\n\nexport function getRecordPathAndAlt (path) {\n  if (!path) {\n    return [null, null]\n  }\n  const items = path.split(/\\+/, 2)\n  return [urlToFsPath(items[0]), items[1]]\n}\n\n/* a react component baseclass that has some basic knowledge about\n   the record it works with. */\nexport default class RecordComponent extends Component {\n  /* this returns the path of the current record.  If the current page does\n   * not have a path component then null is returned. */\n  getRecordPath () {\n    const [path] = getRecordPathAndAlt(this.props.match.params.path)\n    return path\n  }\n\n  /* returns the current alt */\n  getRecordAlt () {\n    const [, alt] = getRecordPathAndAlt(this.props.match.params.path)\n    return !alt ? '_primary' : alt\n  }\n\n  /* return the url path for the current record path (or a modified one)\n     by preserving or overriding the alt */\n  getUrlRecordPathWithAlt (newPath, newAlt) {\n    if (newPath === undefined || newPath === null) {\n      newPath = this.getRecordPath()\n    }\n    if (newAlt === undefined || newAlt === null) {\n      newAlt = this.getRecordAlt()\n    }\n    let rv = fsToUrlPath(newPath)\n    if (newAlt !== '_primary') {\n      rv += '+' + newAlt\n    }\n    return rv\n  }\n\n  /* returns the parent path if available */\n  getParentRecordPath () {\n    return getParentFsPath(this.getRecordPath())\n  }\n}\n","'use strict'\n\nimport React from 'react'\nimport { loadData } from '../utils'\nimport i18n from '../i18n'\nimport makeRichPromise from '../richPromise'\n\nclass ServerStatus extends React.Component {\n  constructor (props) {\n    super(props)\n    this.state = {\n      serverIsUp: true,\n      projectId: null\n    }\n\n    this.intervalId = null\n    this.onInterval = this.onInterval.bind(this)\n  }\n\n  componentDidMount () {\n    this.intervalId = window.setInterval(this.onInterval, 2000)\n  }\n\n  componentWillUnmount () {\n    if (this.intervalId !== null) {\n      window.clearInterval(this.intervalId)\n      this.intervalId = null\n    }\n  }\n\n  onInterval () {\n    loadData('/ping', {}, null, makeRichPromise)\n      .then((resp) => {\n        if (this.state.projectId === null) {\n          this.setState({\n            projectId: resp.project_id\n          })\n        }\n        this.setState({\n          serverIsUp: this.state.projectId === resp.project_id\n        })\n      }, () => {\n        this.setState({\n          serverIsUp: false\n        })\n      })\n  }\n\n  render () {\n    if (this.state.serverIsUp) {\n      return null\n    }\n    return (\n      <div className='server-down-panel'>\n        <div className='server-down-dialog'>\n          <h3>{i18n.trans('ERROR_SERVER_UNAVAILABLE')}</h3>\n          <p>{i18n.trans('ERROR_SERVER_UNAVAILABLE_MESSAGE')}</p>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default ServerStatus\n","'use strict'\n\n/* eslint-env browser */\n\nimport React from 'react'\nimport { apiRequest, loadData, getPlatform } from '../utils'\nimport i18n from '../i18n'\nimport hub from '../hub'\nimport { AttachmentsChangedEvent } from '../events'\nimport RecordComponent from './RecordComponent'\nimport Link from '../components/Link'\nimport makeRichPromise from '../richPromise'\n\nconst getBrowseButtonTitle = () => {\n  const platform = getPlatform()\n  if (platform === 'mac') {\n    return i18n.trans('BROWSE_FS_MAC')\n  } else if (platform === 'windows') {\n    return i18n.trans('BROWSE_FS_WINDOWS')\n  } else {\n    return i18n.trans('BROWSE_FS')\n  }\n}\n\nconst CHILDREN_PER_PAGE = 15\n\nclass ChildPosCache {\n  constructor () {\n    this.memo = []\n  }\n\n  rememberPosition (record, page) {\n    for (let i = 0; i < this.memo.length; i++) {\n      if (this.memo[i][0] === record) {\n        this.memo[i][1] = page\n        return\n      }\n    }\n    this.memo.unshift([record, page])\n    if (this.memo.length > 5) {\n      this.memo.length = 5\n    }\n  }\n\n  getPosition (record, childCount) {\n    for (let i = 0; i < this.memo.length; i++) {\n      if (this.memo[i][0] === record) {\n        let rv = this.memo[i][1]\n        if (childCount !== undefined) {\n          rv = Math.min(rv, Math.ceil(childCount / CHILDREN_PER_PAGE))\n        }\n        return rv\n      }\n    }\n    return 1\n  }\n}\n\nclass Sidebar extends RecordComponent {\n  constructor (props) {\n    super(props)\n\n    this.state = this._getInitialState()\n    this.childPosCache = new ChildPosCache()\n    this.onAttachmentsChanged = this.onAttachmentsChanged.bind(this)\n  }\n\n  _getInitialState () {\n    return {\n      recordAttachments: [],\n      recordChildren: [],\n      recordAlts: [],\n      canHaveAttachments: false,\n      canHaveChildren: false,\n      isAttachment: false,\n      canBeDeleted: false,\n      recordExists: false,\n      lastRecordRequest: null,\n      childrenPage: 1\n    }\n  }\n\n  componentDidMount () {\n    super.componentDidMount()\n    this._updateRecordInfo()\n\n    hub.subscribe(AttachmentsChangedEvent, this.onAttachmentsChanged)\n  }\n\n  componentDidUpdate (prevProps, prevState) {\n    super.componentDidUpdate(prevProps, prevState)\n    if (prevProps.match.params.path !== this.props.match.params.path) {\n      this._updateRecordInfo()\n    }\n  }\n\n  componentWillUnmount () {\n    super.componentWillUnmount()\n    hub.unsubscribe(AttachmentsChangedEvent, this.onAttachmentsChanged)\n  }\n\n  onAttachmentsChanged (event) {\n    if (event.recordPath === this.getRecordPath()) {\n      this._updateRecordInfo()\n    }\n  }\n\n  _updateRecordInfo () {\n    const path = this.getRecordPath()\n    if (path === null) {\n      this.setState(this._getInitialState())\n      return\n    }\n\n    this.setState({\n      lastRecordRequest: path\n    }, () => {\n      loadData('/recordinfo', { path: path }, null, makeRichPromise)\n        .then((resp) => {\n          // we're already fetching something else.\n          if (path !== this.state.lastRecordRequest) {\n            return\n          }\n          const alts = resp.alts\n          alts.sort((a, b) => {\n            const nameA = (a.is_primary ? 'A' : 'B') + i18n.trans(a.name_i18n)\n            const nameB = (b.is_primary ? 'A' : 'B') + i18n.trans(b.name_i18n)\n            return nameA === nameB ? 0 : nameA < nameB ? -1 : 1\n          })\n          this.setState({\n            recordAttachments: resp.attachments,\n            recordChildren: resp.children,\n            recordAlts: alts,\n            canHaveAttachments: resp.can_have_attachments,\n            canHaveChildren: resp.can_have_children,\n            isAttachment: resp.is_attachment,\n            canBeDeleted: resp.can_be_deleted,\n            recordExists: resp.exists,\n            childrenPage: this.childPosCache.getPosition(\n              path, resp.children.length)\n          })\n        })\n    })\n  }\n\n  fsOpen (event) {\n    event.preventDefault()\n    apiRequest('/browsefs', {\n      data: {\n        path: this.getRecordPath(),\n        alt: this.getRecordAlt()\n      },\n      // eslint-disable-next-line indent\n      method: 'POST'\n    }, makeRichPromise)\n      .then((resp) => {\n        if (!resp.okay) {\n          alert(i18n.trans('ERROR_CANNOT_BROWSE_FS'))\n        }\n      })\n  }\n\n  renderPageActions () {\n    const urlPath = this.getUrlRecordPathWithAlt()\n    const links = []\n    const deleteLink = null\n\n    links.push(\n      <li key='edit'>\n        <Link to={`${urlPath}/edit`}>\n          {this.state.isAttachment\n            ? i18n.trans('EDIT_METADATA')\n            : i18n.trans('EDIT')}\n        </Link>\n      </li>\n    )\n\n    if (this.state.canBeDeleted) {\n      links.push(\n        <li key='delete'>\n          <Link to={`${urlPath}/delete`}>\n            {i18n.trans('DELETE')}\n          </Link>\n        </li>\n      )\n    }\n\n    links.push(\n      <li key='preview'>\n        <Link to={`${urlPath}/preview`}>\n          {i18n.trans('PREVIEW')}\n        </Link>\n      </li>\n    )\n\n    if (this.state.recordExists) {\n      links.push(\n        <li key='fs-open'>\n          <a href='#' onClick={this.fsOpen.bind(this)}>\n            {getBrowseButtonTitle()}\n          </a>\n        </li>\n      )\n    }\n\n    if (this.state.canHaveChildren) {\n      links.push(\n        <li key='add-child'>\n          <Link to={`${urlPath}/add-child`}>\n            {i18n.trans('ADD_CHILD_PAGE')}\n          </Link>\n        </li>\n      )\n    }\n\n    if (this.state.canHaveAttachments) {\n      links.push(\n        <li key='add-attachment'>\n          <Link to={`${urlPath}/upload`}>\n            {i18n.trans('ADD_ATTACHMENT')}\n          </Link>\n        </li>\n      )\n    }\n\n    const title = this.state.isAttachment\n      ? i18n.trans('ATTACHMENT_ACTIONS')\n      : i18n.trans('PAGE_ACTIONS')\n\n    return (\n      <div key='actions' className='section'>\n        <h3>{title}</h3>\n        <ul className='nav'>\n          {links}\n          {deleteLink}\n        </ul>\n      </div>\n    )\n  }\n\n  renderAlts () {\n    if (this.state.recordAlts.length < 2) {\n      return null\n    }\n\n    const items = this.state.recordAlts.map((item) => {\n      let title = i18n.trans(item.name_i18n)\n      let className = 'alt'\n      if (item.is_primary) {\n        title += ' (' + i18n.trans('PRIMARY_ALT') + ')'\n      } else if (item.primary_overlay) {\n        title += ' (' + i18n.trans('PRIMARY_OVERLAY') + ')'\n      }\n      if (!item.exists) {\n        className += ' alt-missing'\n      }\n\n      const path = this.getPathToAdminPage(null, {\n        path: this.getUrlRecordPathWithAlt(null, item.alt)\n      })\n      return (\n        <li key={item.alt} className={className}>\n          <Link to={path}>{title}</Link>\n        </li>\n      )\n    })\n\n    return (\n      <div key='alts' className='section'>\n        <h3>{i18n.trans('ALTS')}</h3>\n        <ul className='nav'>\n          {items}\n        </ul>\n      </div>\n    )\n  }\n\n  renderChildPagination () {\n    const pages = Math.ceil(this.state.recordChildren.length / CHILDREN_PER_PAGE)\n    if (pages <= 1) {\n      return null\n    }\n    const page = this.state.childrenPage\n    const goToPage = (diff, event) => {\n      event.preventDefault()\n      const newPage = page + diff\n      this.childPosCache.rememberPosition(this.getRecordPath(), newPage)\n      this.setState({\n        childrenPage: newPage\n      })\n    }\n\n    return (\n      <li className='pagination'>\n        {page > 1\n          ? <a href='#' onClick={goToPage.bind(this, -1)}>«</a>\n          : <em>«</em>}\n        <span className='page'>{page + ' / ' + pages}</span>\n        {page < pages\n          ? <a href='#' onClick={goToPage.bind(this, +1)}>»</a>\n          : <em>»</em>}\n      </li>\n    )\n  }\n\n  renderChildActions () {\n    const target = this.props.match.params.page === 'preview' ? 'preview' : 'edit'\n\n    const children = this.state.recordChildren.slice(\n      (this.state.childrenPage - 1) * CHILDREN_PER_PAGE,\n      this.state.childrenPage * CHILDREN_PER_PAGE)\n\n    const items = children.map((child) => {\n      const urlPath = this.getUrlRecordPathWithAlt(child.path)\n      return (\n        <li key={child.id}>\n          <Link to={`${urlPath}/${target}`}>\n            {i18n.trans(child.label_i18n)}\n          </Link>\n        </li>\n      )\n    })\n\n    if (items.length === 0) {\n      items.push(\n        <li key='_missing'>\n          <em>{i18n.trans('NO_CHILD_PAGES')}</em>\n        </li>\n      )\n    }\n\n    return (\n      <div key='children' className='section'>\n        <h3>{i18n.trans('CHILD_PAGES')}</h3>\n        <ul className='nav record-children'>\n          {this.renderChildPagination()}\n          {items}\n        </ul>\n      </div>\n    )\n  }\n\n  renderAttachmentActions () {\n    const items = this.state.recordAttachments.map((atch) => {\n      const urlPath = this.getUrlRecordPathWithAlt(atch.path)\n      return (\n        <li key={atch.id}>\n          <Link to={`${urlPath}/edit`}>\n            {atch.id} ({atch.type})\n          </Link>\n        </li>\n      )\n    })\n\n    if (items.length === 0) {\n      items.push(\n        <li key='_missing'>\n          <em>{i18n.trans('NO_ATTACHMENTS')}</em>\n        </li>\n      )\n    }\n\n    return (\n      <div key='attachments' className='section'>\n        <h3>{i18n.trans('ATTACHMENTS')}</h3>\n        <ul className='nav record-attachments'>\n          {items}\n        </ul>\n      </div>\n    )\n  }\n\n  render () {\n    const sections = []\n\n    if (this.getRecordPath() !== null) {\n      sections.push(this.renderPageActions())\n    }\n\n    sections.push(this.renderAlts())\n\n    if (this.state.canHaveChildren) {\n      sections.push(this.renderChildActions())\n    }\n\n    if (this.state.canHaveAttachments) {\n      sections.push(this.renderAttachmentActions())\n    }\n\n    return <div className='sidebar-wrapper'>{sections}</div>\n  }\n}\n\nexport default Sidebar\n","'use strict'\n\nimport PropTypes from 'prop-types'\nimport React from 'react'\nimport dialogSystem from '../dialogSystem'\nimport i18n from '../i18n'\n\nclass SlideDialog extends React.Component {\n  constructor (props) {\n    super(props)\n    this._onKeyPress = this._onKeyPress.bind(this)\n  }\n\n  componentDidMount () {\n    if (this.props.closeOnEscape) {\n      window.addEventListener('keydown', this._onKeyPress)\n    }\n  }\n\n  componentWillUnmount () {\n    window.removeEventListener('keydown', this._onKeyPress)\n  }\n\n  _onKeyPress (event) {\n    if (event.which === 27 && this.props.closeOnEscape) {\n      event.preventDefault()\n      dialogSystem.dismissDialog()\n    }\n  }\n\n  _onCloseClick (event) {\n    event.preventDefault()\n    dialogSystem.dismissDialog()\n  }\n\n  render () {\n    let { children, title, hasCloseButton, className } = this.props\n    className = (className || '') + ' sliding-panel container'\n    return (\n      <div className={className}>\n        <div className='col-md-6 col-md-offset-4'>\n          {\n            hasCloseButton &&\n              <a\n                href='#'\n                className='close-btn'\n                onClick={this._onCloseClick.bind(this)}\n              >\n                {i18n.trans('CLOSE')}\n              </a>\n          }\n          <h3>{title}</h3>\n          {children}\n        </div>\n      </div>\n    )\n  }\n}\n\nSlideDialog.propTypes = {\n  title: PropTypes.string,\n  hasCloseButton: PropTypes.bool,\n  closeOnEscape: PropTypes.bool\n}\n\nexport default SlideDialog\n","'use strict'\n\nimport React from 'react'\nimport PropTypes from 'prop-types'\n\nclass ToggleGroup extends React.Component {\n  constructor (props) {\n    super(props)\n    this.state = {\n      isVisible: props.defaultVisibility\n    }\n  }\n\n  toggle (event) {\n    event.preventDefault()\n    this.setState({\n      isVisible: !this.state.isVisible\n    })\n  }\n\n  render () {\n    let { className, groupTitle, children, defaultVisibility, ...otherProps } = this.props\n    className = (className || '') + ' toggle-group'\n    if (this.state.isVisible) {\n      className += ' toggle-group-open'\n    } else {\n      className += ' toggle-group-closed'\n    }\n\n    return (\n      <div className={className} {...otherProps}>\n        <div className='header'>\n          <h4\n            className='toggle' onClick={\n              this.toggle.bind(this)\n            }\n          >{groupTitle}\n          </h4>\n        </div>\n        <div className='children'>\n          {children}\n        </div>\n      </div>\n    )\n  }\n}\n\nToggleGroup.propTypes = {\n  groupTitle: PropTypes.string,\n  defaultVisibility: PropTypes.bool\n}\n\nexport default ToggleGroup\n","'use strict'\n\nimport hub from './hub'\nimport { DialogChangedEvent } from './events'\n\nclass DialogSystem {\n  constructor () {\n    this._dialogInstance = null\n  }\n\n  // invoked by the application once the dialog has been created.\n  notifyDialogInstance (dialog) {\n    this._dialogInstance = dialog\n  }\n\n  // given a dialog class this will instruct the application to bring up\n  // the dialog and display it.\n  showDialog (dialog, options) {\n    // if the current dialog prevents navigation, then we just silently\n    // will not show the dialog.\n    if (!this.preventNavigation()) {\n      hub.emit(new DialogChangedEvent({\n        dialog: dialog,\n        dialogOptions: options || {}\n      }))\n    }\n  }\n\n  // tells the application to dismiss the current dialog.\n  dismissDialog () {\n    if (!this.preventNavigation()) {\n      hub.emit(new DialogChangedEvent({\n        currentDialog: null\n      }))\n    }\n  }\n\n  // indicates if a dialog is shown\n  dialogIsOpen () {\n    return !!this._dialogInstance\n  }\n\n  // returns true if the current dialog prevents navigation.\n  preventNavigation () {\n    return (\n      this._dialogInstance &&\n      this._dialogInstance.preventNavigation !== undefined &&\n      this._dialogInstance.preventNavigation()\n    )\n  }\n}\n\nconst dialogSystem = new DialogSystem()\n\nexport default dialogSystem\n","'use strict'\n\nimport React from 'react'\nimport Component from '../components/Component'\nimport SlideDialog from '../components/SlideDialog'\nimport { apiRequest } from '../utils'\nimport i18n from '../i18n'\nimport dialogSystem from '../dialogSystem'\nimport makeRichPromise from '../richPromise'\n\nclass Refresh extends Component {\n  constructor (props) {\n    super(props)\n    this.state = {\n      currentState: 'IDLE'\n    }\n  }\n\n  preventNavigation () {\n    return !this.isSafeToNavigate()\n  }\n\n  isSafeToNavigate () {\n    return this.state.currentState === 'IDLE' ||\n      this.state.currentState === 'DONE'\n  }\n\n  onRefresh () {\n    this.setState({\n      currentState: 'CLEANING'\n    })\n    apiRequest('/clean', {\n      method: 'POST'\n    }, makeRichPromise).then((resp) => {\n      this.setState({\n        currentState: 'DONE'\n      })\n    })\n  }\n\n  onCancel () {\n    dialogSystem.dismissDialog()\n  }\n\n  render () {\n    let progress = null\n    if (this.state.currentState !== 'IDLE') {\n      progress = (\n        <div>\n          <h3>{this.state.currentState !== 'DONE'\n            ? i18n.trans('CURRENTLY_REFRESHING_BUILD')\n            : i18n.trans('REFRESHING_BUILD_DONE')}\n          </h3>\n        </div>\n      )\n    }\n\n    return (\n      <SlideDialog\n        hasCloseButton={false}\n        closeOnEscape\n        title={i18n.trans('REFRESH_BUILD')}\n      >\n        <p>{i18n.trans('REFRESH_BUILD_NOTE')}</p>\n        {progress}\n        <div className='actions'>\n          <button\n            type='submit' className='btn btn-primary'\n            disabled={!this.isSafeToNavigate()}\n            onClick={this.onRefresh.bind(this)}\n          >{i18n.trans('REFRESH_BUILD')}\n          </button>\n          <button\n            type='submit' className='btn btn-default'\n            disabled={!this.isSafeToNavigate()}\n            onClick={this.onCancel.bind(this)}\n          >{i18n.trans(\n              this.state.currentState === 'DONE' ? 'CLOSE' : 'CANCEL')}\n          </button>\n        </div>\n      </SlideDialog>\n    )\n  }\n}\n\nexport default Refresh\n","'use strict'\n\nimport PropTypes from 'prop-types'\nimport React from 'react'\nimport RecordComponent from '../components/RecordComponent'\nimport SlideDialog from '../components/SlideDialog'\nimport dialogSystem from '../dialogSystem'\nimport i18n from '../i18n'\n\nclass ErrorDialog extends RecordComponent {\n  onClose () {\n    dialogSystem.dismissDialog()\n  }\n\n  render () {\n    return (\n      <SlideDialog\n        hasCloseButton\n        closeOnEscape\n        title={i18n.trans('ERROR')}\n      >\n        <p>\n          {i18n.trans('ERROR_OCURRED')}{': '}\n          {i18n.trans('ERROR_' + this.props.error.code)}\n        </p>\n        <div className='actions'>\n          <button\n            type='submit' className='btn btn-primary'\n            onClick={this.onClose.bind(this)}\n          >{i18n.trans('CLOSE')}\n          </button>\n        </div>\n      </SlideDialog>\n    )\n  }\n}\n\nErrorDialog.propTypes = {\n  error: PropTypes.object\n}\n\nexport default ErrorDialog\n","'use strict'\n\nimport React from 'react'\n\nimport RecordComponent from '../components/RecordComponent'\nimport SlideDialog from '../components/SlideDialog'\nimport { apiRequest } from '../utils'\nimport i18n from '../i18n'\nimport dialogSystem from '../dialogSystem'\nimport makeRichPromise from '../richPromise'\n\nclass FindFiles extends RecordComponent {\n  constructor (props) {\n    super(props)\n    this.state = {\n      query: '',\n      currentSelection: -1,\n      results: []\n    }\n  }\n\n  componentDidMount () {\n    super.componentDidMount()\n    this.refs.q.focus()\n  }\n\n  onInputChange (e) {\n    const q = e.target.value\n\n    if (q === '') {\n      this.setState({\n        query: '',\n        results: [],\n        currentSelection: -1\n      })\n    } else {\n      this.setState({\n        query: q\n      })\n\n      apiRequest('/find', {\n        data: {\n          q: q,\n          alt: this.getRecordAlt(),\n          lang: i18n.currentLanguage\n        },\n        method: 'POST'\n      }, makeRichPromise).then((resp) => {\n        this.setState({\n          results: resp.results,\n          currentSelection: Math.min(this.state.currentSelection,\n            resp.results.length - 1)\n        })\n      })\n    }\n  }\n\n  onInputKey (e) {\n    let sel = this.state.currentSelection\n    const max = this.state.results.length\n    if (e.which === 40) {\n      e.preventDefault()\n      sel = (sel + 1) % max\n    } else if (e.which === 38) {\n      e.preventDefault()\n      sel = (sel - 1 + max) % max\n    } else if (e.which === 13) {\n      this.onActiveItem(this.state.currentSelection)\n    }\n    this.setState({\n      currentSelection: sel\n    })\n  }\n\n  onActiveItem (index) {\n    const item = this.state.results[index]\n    if (item !== undefined) {\n      const target = this.props.match.params.page === 'preview' ? '.preview' : '.edit'\n      const urlPath = this.getUrlRecordPathWithAlt(item.path)\n      dialogSystem.dismissDialog()\n      this.transitionToAdminPage(target, { path: urlPath })\n    }\n  }\n\n  selectItem (index) {\n    this.setState({\n      currentSelection: Math.min(index, this.state.results.length - 1)\n    })\n  }\n\n  renderResults () {\n    const rv = this.state.results.map((result, idx) => {\n      const parents = result.parents.map((item, idx) => {\n        return (\n          <span className='parent' key={idx}>\n            {item.title}\n          </span>\n        )\n      })\n\n      return (\n        <li\n          key={idx}\n          className={idx === this.state.currentSelection ? 'active' : ''}\n          onClick={this.onActiveItem.bind(this, idx)}\n          onMouseEnter={this.selectItem.bind(this, idx)}\n        >\n          {parents}\n          <strong>{result.title}</strong>\n        </li>\n      )\n    })\n\n    return (\n      <ul className='search-results'>{rv}</ul>\n    )\n  }\n\n  render () {\n    return (\n      <SlideDialog\n        hasCloseButton\n        closeOnEscape\n        title={i18n.trans('FIND_FILES')}\n      >\n        <div className='form-group'>\n          <input\n            type='text'\n            ref='q'\n            className='form-control'\n            value={this.state.query}\n            onChange={this.onInputChange.bind(this)}\n            onKeyDown={this.onInputKey.bind(this)}\n            placeholder={i18n.trans('FIND_FILES_PLACEHOLDER')}\n          />\n        </div>\n        {this.renderResults()}\n      </SlideDialog>\n    )\n  }\n}\n\nexport default FindFiles\n","'use strict'\n\n/* eslint-env browser */\n\nimport React from 'react'\n\nimport Component from '../components/Component'\nimport SlideDialog from '../components/SlideDialog'\nimport { apiRequest, loadData, getApiUrl } from '../utils'\nimport i18n from '../i18n'\nimport dialogSystem from '../dialogSystem'\nimport makeRichPromise from '../richPromise'\n\nclass Publish extends Component {\n  constructor (props) {\n    super(props)\n\n    this.state = {\n      servers: [],\n      activeTarget: null,\n      log: [],\n      currentState: 'IDLE'\n    }\n  }\n\n  componentDidMount () {\n    super.componentDidMount()\n    this.syncDialog()\n  }\n\n  componentDidUpdate (nextProps) {\n    super.componentDidUpdate()\n    if (nextProps.match.params.path !== this.props.match.params.path) {\n      this.syncDialog()\n    }\n    const node = this.refs.log\n    if (node) {\n      node.scrollTop = node.scrollHeight\n    }\n  }\n\n  preventNavigation () {\n    return !this.isSafeToPublish()\n  }\n\n  syncDialog () {\n    loadData('/servers', {}, null, makeRichPromise)\n      .then(({ servers }) => {\n        this.setState({\n          servers: servers,\n          activeTarget: servers && servers.length\n            ? servers[0].id\n            : null\n        })\n      })\n  }\n\n  isSafeToPublish () {\n    return this.state.currentState === 'IDLE' ||\n      this.state.currentState === 'DONE'\n  }\n\n  onPublish () {\n    if (this.isSafeToPublish()) {\n      this._beginBuild()\n    }\n  }\n\n  onCancel () {\n    dialogSystem.dismissDialog()\n  }\n\n  _beginBuild () {\n    this.setState({\n      log: [],\n      currentState: 'BUILDING'\n    })\n    apiRequest('/build', {\n      method: 'POST'\n    }, makeRichPromise).then((resp) => {\n      this._beginPublish()\n    })\n  }\n\n  _beginPublish () {\n    this.setState({\n      currentState: 'PUBLISH'\n    })\n\n    const es = new EventSource(getApiUrl('/publish') +\n      '?server=' + encodeURIComponent(this.state.activeTarget))\n    es.addEventListener('message', (event) => {\n      const data = JSON.parse(event.data)\n      if (data === null) {\n        this.setState({\n          currentState: 'DONE'\n        })\n        es.close()\n      } else {\n        this.setState({\n          log: this.state.log.concat(data.msg)\n        })\n      }\n    })\n  }\n\n  onSelectServer (event) {\n    this.setState({\n      activeTarget: event.target.value\n    })\n  }\n\n  render () {\n    const servers = this.state.servers.map((server) => {\n      return (\n        <option value={server.id} key={server.id}>\n          {i18n.trans(server.name_i18n) + ' (' + server.short_target + ')'}\n        </option>\n      )\n    })\n\n    let progress = null\n    if (this.state.currentState !== 'IDLE') {\n      progress = (\n        <div>\n          <h3>{this.state.currentState !== 'DONE'\n            ? i18n.trans('CURRENTLY_PUBLISHING')\n            : i18n.trans('PUBLISH_DONE')}\n          </h3>\n          <pre>{i18n.trans('STATE') + ': ' +\n            i18n.trans('PUBLISH_STATE_' + this.state.currentState)}\n          </pre>\n          <pre ref='log' className='build-log'>{this.state.log.join('\\n')}</pre>\n        </div>\n      )\n    }\n\n    return (\n      <SlideDialog\n        hasCloseButton={false}\n        closeOnEscape\n        title={i18n.trans('PUBLISH')}\n      >\n        <p>{i18n.trans('PUBLISH_NOTE')}</p>\n        <dl>\n          <dt>{i18n.trans('PUBLISH_SERVER')}</dt>\n          <dd>\n            <div className='input-group'>\n              <select\n                value={this.state.activeTarget}\n                onChange={this.onSelectServer.bind(this)}\n                className='form-control'\n              >\n                {servers}\n              </select>\n            </div>\n          </dd>\n        </dl>\n        <div className='actions'>\n          <button\n            type='submit' className='btn btn-primary'\n            disabled={!this.isSafeToPublish()}\n            onClick={this.onPublish.bind(this)}\n          >{i18n.trans('PUBLISH')}\n          </button>\n          <button\n            type='submit' className='btn btn-default'\n            disabled={!this.isSafeToPublish()}\n            onClick={this.onCancel.bind(this)}\n          >{i18n.trans(\n              this.state.currentState === 'DONE' ? 'CLOSE' : 'CANCEL')}\n          </button>\n        </div>\n        {progress}\n      </SlideDialog>\n    )\n  }\n}\n\nexport default Publish\n","'use strict'\n\nclass Event {\n  get type () {\n    return Object.getPrototypeOf(this).constructor.getEventType()\n  }\n\n  toString () {\n    return '[Event ' + this.type + ']'\n  }\n}\n\nEvent.getEventType = function () {\n  return this.name\n}\n\nexport class RecordEvent extends Event {\n  constructor (options) {\n    super(options = options || {})\n    this.recordPath = options.recordPath\n  }\n}\n\nexport class AttachmentsChangedEvent extends RecordEvent {\n  constructor (options) {\n    super(options = options || {})\n    this.attachmentsAdded = options.attachmentsAdded || []\n    this.attachmentsRemoved = options.attachmentsRemoved || []\n  }\n}\n\nexport class DialogChangedEvent extends Event {\n  constructor (options) {\n    super(options = options || {})\n    this.dialog = options.dialog\n    this.dialogOptions = options.dialogOptions\n  }\n}\n","'use strict'\n\nclass Hub {\n  constructor () {\n    this._subscriptions = {}\n  }\n\n  /* subscribes a callback to an event */\n  subscribe (event, callback) {\n    if (typeof event !== 'string') {\n      event = event.getEventType()\n    }\n\n    let subs = this._subscriptions[event]\n    if (subs === undefined) {\n      this._subscriptions[event] = subs = []\n    }\n\n    for (let i = 0; i < subs.length; i++) {\n      if (subs[i] === callback) {\n        return false\n      }\n    }\n\n    subs.push(callback)\n    return true\n  }\n\n  /* unsubscribes a callback from an event */\n  unsubscribe (event, callback) {\n    if (typeof event !== 'string') {\n      event = event.getEventType()\n    }\n\n    const subs = this._subscriptions[event]\n    if (subs === undefined) {\n      return false\n    }\n\n    for (let i = 0; i < subs.length; i++) {\n      if (subs[i] === callback) {\n        subs.splice(i, 1)\n        return true\n      }\n    }\n    return false\n  }\n\n  /* emits an event with some parameters */\n  emit (event) {\n    const subs = this._subscriptions[event.type]\n    if (subs !== undefined) {\n      subs.forEach((callback) => {\n        try {\n          callback(event)\n        } catch (e) {\n          console.log('Event callback failed: ', e, 'callback=',\n            callback, 'event=', event)\n        }\n      })\n    }\n  }\n}\n\nconst hub = new Hub()\n\nexport default hub\n","const loadTranslations = () => {\n  const ctx = require.context('../../../translations', true, /\\.json$/)\n  const rv = {}\n  ctx.keys().forEach((key) => {\n    const langIdMatch = key.match(/([a-z]+)/)\n    rv[langIdMatch[1]] = ctx(key)\n  })\n  return rv\n}\n\nconst i18n = {\n  translations: loadTranslations(),\n\n  currentLanguage: 'en',\n\n  setLanguageFromLocale (locale) {\n    if (locale) {\n      const lang = locale.split(/[-_]/)[0].toLowerCase()\n      if (this.translations[lang] !== undefined) {\n        this.currentLanguage = lang\n      }\n    }\n  },\n\n  trans (key) {\n    let rv\n    if (typeof key === 'object') {\n      rv = key[i18n.currentLanguage]\n      if (rv === undefined) {\n        rv = key.en\n      }\n      return rv\n    }\n    return i18n.translations[i18n.currentLanguage][key] || key\n  }\n}\n\nexport default i18n\n","'use strict'\n\nimport React from 'react'\nimport ReactDOM from 'react-dom'\nimport { BrowserRouter as Router, Route, Switch, Redirect } from 'react-router-dom'\nimport i18n from './i18n'\n\nimport 'bootstrap'\nimport './bootstrap-extras'\nimport 'font-awesome/css/font-awesome.css'\n\n// polyfill for internet explorer\nimport 'event-source-polyfill'\n\n// route targets\nimport App from './views/App'\nimport EditPage from './views/EditPage'\nimport DeletePage from './views/DeletePage'\nimport PreviewPage from './views/PreviewPage'\nimport AddChildPage from './views/AddChildPage'\nimport AddAttachmentPage from './views/AddAttachmentPage'\n\ni18n.currentLanguage = $LEKTOR_CONFIG.lang\n\nfunction BadRoute (props) {\n  return (\n    <div>\n      <h2>Nothing to see here</h2>\n      <p>There is really nothing to see here.</p>\n    </div>\n  )\n}\n\nfunction Main (props) {\n  const { path } = props.match\n  return (\n    <App {...props}>\n      <Switch>\n        <Route name='edit' path={`${path}/:path/edit`} component={EditPage} />\n        <Route name='delete' path={`${path}/:path/delete`} component={DeletePage} />\n        <Route name='preview' path={`${path}/:path/preview`} component={PreviewPage} />\n        <Route name='add-child' path={`${path}/:path/add-child`} component={AddChildPage} />\n        <Route name='upload' path={`${path}/:path/upload`} component={AddAttachmentPage} />\n        <Route exact path={path}>\n          <Redirect to={`${path}/root/edit`} />\n        </Route>\n        <Route component={BadRoute} />\n      </Switch>\n    </App>\n  )\n}\n\nconst dash = document.getElementById('dash')\n\nif (dash) {\n  ReactDOM.render((\n    <Router>\n      <Route name='app' path={$LEKTOR_CONFIG.admin_root} component={Main} />\n    </Router>\n  ), dash)\n}\n","'use strict'\n\nconst lineIsDashes = (line) => {\n  line = line.match(/^\\s*(.*?)\\s*$/)[1]\n  return line.length >= 3 && line === (new Array(line.length + 1)).join('-')\n}\n\nconst processBuf = (buf) => {\n  const lines = buf.map((line) => {\n    if (lineIsDashes(line)) {\n      line = line.substr(1)\n    }\n    return line\n  })\n\n  if (lines.length > 0) {\n    const lastLine = lines[lines.length - 1]\n    if (lastLine.substr(lastLine.length - 1) === '\\n') {\n      lines[lines.length - 1] = lastLine.substr(0, lastLine.length - 1)\n    }\n  }\n\n  return lines\n}\n\nconst tokenize = (lines) => {\n  let key = null\n  let buf = []\n  let wantNewline = false\n  const rv = []\n\n  const flushItem = () => {\n    rv.push([key, processBuf(buf)])\n    key = null\n    buf = []\n  }\n\n  for (let i = 0; i < lines.length; i++) {\n    const line = lines[i].match(/^(.*?)(\\r?\\n)*$/m)[1] + '\\n'\n\n    if (line.match(/^(.*?)\\s*$/m)[1] === '---') {\n      wantNewline = false\n      if (key !== null) {\n        flushItem()\n      }\n    } else if (key !== null) {\n      if (wantNewline) {\n        wantNewline = false\n        if (line.match(/^\\s*$/)) {\n          continue\n        }\n      }\n      buf.push(line)\n    } else {\n      const bits = line.split(':')\n      if (bits.length >= 2) {\n        key = bits.shift().match(/^\\s*(.*?)\\s*$/m)[1]\n        const firstBit = bits.join(':').match(/^[\\t ]*(.*?)[\\t ]*$/m)[1]\n        if (!firstBit.match(/^\\s*$/)) {\n          buf = [firstBit]\n        } else {\n          buf = []\n          wantNewline = true\n        }\n      }\n    }\n  }\n\n  if (key !== null) {\n    flushItem()\n  }\n\n  return rv\n}\n\nconst serialize = (blocks) => {\n  const rv = []\n\n  blocks.forEach((item, idx) => {\n    const [key, value] = item\n    if (idx > 0) {\n      rv.push('---\\n')\n    }\n    if (value.match(/([\\r\\n]|(^[\\t ])|([\\t ]$))/m)) {\n      rv.push(key + ':\\n')\n      rv.push('\\n')\n      const lines = value.split(/\\n/)\n      if (lines[lines.length - 1] === '') {\n        lines.pop()\n      }\n      lines.forEach((line, idx, arr) => {\n        if (lineIsDashes(line)) {\n          line = '-' + line\n        }\n        rv.push(line + '\\n')\n      })\n    } else {\n      rv.push(key + ': ' + value + '\\n')\n    }\n  })\n\n  return rv\n}\n\nexport default {\n  tokenize: tokenize,\n  serialize: serialize\n}\n","import ErrorDialog from './dialogs/errorDialog'\nimport dialogSystem from './dialogSystem'\n\nconst bringUpDialog = (error) => {\n  if (!dialogSystem.dialogIsOpen()) {\n    dialogSystem.showDialog(ErrorDialog, {\n      error: error\n    })\n  }\n}\n\nconst makeRichPromise = (callback, fallback = bringUpDialog) => {\n  const rv = new Promise(callback)\n  const then = rv.then\n  let hasRejectionHandler = false\n\n  rv.then(null, (value) => {\n    if (!hasRejectionHandler) {\n      return fallback(value)\n    }\n  })\n\n  rv.then = (onFulfilled, onRejected) => {\n    if (onRejected) {\n      hasRejectionHandler = true\n    }\n    return then.call(rv, onFulfilled, onRejected)\n  }\n\n  return rv\n}\n\nexport default makeRichPromise\n","export const slug = (string, opts) => {\n  opts = opts || {}\n  string = string.toString()\n  if (typeof opts === 'string') { opts = { replacement: opts } }\n  opts.mode = opts.mode || slug.defaults.mode\n  const defaults = slug.defaults.modes[opts.mode];\n  ['replacement', 'multicharmap', 'charmap', 'remove'].forEach((key) => {\n    opts[key] = opts[key] || defaults[key]\n  })\n  if (typeof opts.symbols === 'undefined') { opts.symbols = defaults.symbols }\n  const lengths = []\n  Object.keys(opts.multicharmap).forEach((key) => {\n    const len = key.length\n    if (lengths.indexOf(len) === -1) { lengths.push(len) }\n  })\n  let result = ''\n  for (let char, i = 0, l = string.length; i < l; i++) {\n    char = string[i]\n    if (!lengths.some((len) => {\n      const str = string.substr(i, len)\n      if (opts.multicharmap[str]) {\n        i += len - 1\n        char = opts.multicharmap[str]\n        return true\n      } else return false\n    })) {\n      if (opts.charmap[char]) {\n        char = opts.charmap[char]\n      }\n    }\n    char = char.replace(/[^\\w\\s\\-._~]/g, '') // allowed\n    if (opts.remove) char = char.replace(opts.remove, '') // add flavour\n    result += char\n  }\n  result = result.replace(/^\\s+|\\s+$/g, '') // trim leading/trailing spaces\n  result = result.replace(/[-\\s]+/g, opts.replacement) // convert spaces\n  return result.replace(opts.replacement + '$', '') // remove trailing separator\n}\n\nslug.defaults = {\n  mode: 'pretty'\n}\n\nslug.multicharmap = slug.defaults.multicharmap = {\n  '<3': 'love', '&&': 'and', '||': 'or', 'w/': 'with'\n}\n\n// https://code.djangoproject.com/browser/django/trunk/django/contrib/admin/media/js/urlify.js\nslug.charmap = slug.defaults.charmap = {\n  // latin\n  À: 'A',\n  Á: 'A',\n  Â: 'A',\n  Ã: 'A',\n  Ä: 'Ae',\n  Å: 'A',\n  Æ: 'AE',\n  Ç: 'C',\n  È: 'E',\n  É: 'E',\n  Ê: 'E',\n  Ë: 'E',\n  Ì: 'I',\n  Í: 'I',\n  Î: 'I',\n  Ï: 'I',\n  Ð: 'D',\n  Ñ: 'N',\n  Ò: 'O',\n  Ó: 'O',\n  Ô: 'O',\n  Õ: 'O',\n  Ö: 'Oe',\n  Ő: 'O',\n  Ø: 'O',\n  Ù: 'U',\n  Ú: 'U',\n  Û: 'U',\n  Ü: 'Ue',\n  Ű: 'U',\n  Ý: 'Y',\n  Þ: 'TH',\n  ß: 'ss',\n  à: 'a',\n  á: 'a',\n  â: 'a',\n  ã: 'a',\n  ä: 'ae',\n  å: 'a',\n  æ: 'ae',\n  ç: 'c',\n  è: 'e',\n  é: 'e',\n  ê: 'e',\n  ë: 'e',\n  ì: 'i',\n  í: 'i',\n  î: 'i',\n  ï: 'i',\n  ð: 'd',\n  ñ: 'n',\n  ò: 'o',\n  ó: 'o',\n  ô: 'o',\n  õ: 'o',\n  ö: 'oe',\n  ő: 'o',\n  ø: 'o',\n  ù: 'u',\n  ú: 'u',\n  û: 'u',\n  ü: 'ue',\n  ű: 'u',\n  ý: 'y',\n  þ: 'th',\n  ÿ: 'y',\n  ẞ: 'SS',\n  // greek\n  α: 'a',\n  β: 'b',\n  γ: 'g',\n  δ: 'd',\n  ε: 'e',\n  ζ: 'z',\n  η: 'h',\n  θ: '8',\n  ι: 'i',\n  κ: 'k',\n  λ: 'l',\n  μ: 'm',\n  ν: 'n',\n  ξ: '3',\n  ο: 'o',\n  π: 'p',\n  ρ: 'r',\n  σ: 's',\n  τ: 't',\n  υ: 'y',\n  φ: 'f',\n  χ: 'x',\n  ψ: 'ps',\n  ω: 'w',\n  ά: 'a',\n  έ: 'e',\n  ί: 'i',\n  ό: 'o',\n  ύ: 'y',\n  ή: 'h',\n  ώ: 'w',\n  ς: 's',\n  ϊ: 'i',\n  ΰ: 'y',\n  ϋ: 'y',\n  ΐ: 'i',\n  Α: 'A',\n  Β: 'B',\n  Γ: 'G',\n  Δ: 'D',\n  Ε: 'E',\n  Ζ: 'Z',\n  Η: 'H',\n  Θ: '8',\n  Ι: 'I',\n  Κ: 'K',\n  Λ: 'L',\n  Μ: 'M',\n  Ν: 'N',\n  Ξ: '3',\n  Ο: 'O',\n  Π: 'P',\n  Ρ: 'R',\n  Σ: 'S',\n  Τ: 'T',\n  Υ: 'Y',\n  Φ: 'F',\n  Χ: 'X',\n  Ψ: 'PS',\n  Ω: 'W',\n  Ά: 'A',\n  Έ: 'E',\n  Ί: 'I',\n  Ό: 'O',\n  Ύ: 'Y',\n  Ή: 'H',\n  Ώ: 'W',\n  Ϊ: 'I',\n  Ϋ: 'Y',\n  // turkish\n  ş: 's',\n  Ş: 'S',\n  ı: 'i',\n  İ: 'I',\n  ğ: 'g',\n  Ğ: 'G',\n  // russian\n  а: 'a',\n  б: 'b',\n  в: 'v',\n  г: 'g',\n  д: 'd',\n  е: 'e',\n  ё: 'yo',\n  ж: 'zh',\n  з: 'z',\n  и: 'i',\n  й: 'j',\n  к: 'k',\n  л: 'l',\n  м: 'm',\n  н: 'n',\n  о: 'o',\n  п: 'p',\n  р: 'r',\n  с: 's',\n  т: 't',\n  у: 'u',\n  ф: 'f',\n  х: 'h',\n  ц: 'c',\n  ч: 'ch',\n  ш: 'sh',\n  щ: 'sh',\n  ъ: 'u',\n  ы: 'y',\n  ь: '',\n  э: 'e',\n  ю: 'yu',\n  я: 'ya',\n  А: 'A',\n  Б: 'B',\n  В: 'V',\n  Г: 'G',\n  Д: 'D',\n  Е: 'E',\n  Ё: 'Yo',\n  Ж: 'Zh',\n  З: 'Z',\n  И: 'I',\n  Й: 'J',\n  К: 'K',\n  Л: 'L',\n  М: 'M',\n  Н: 'N',\n  О: 'O',\n  П: 'P',\n  Р: 'R',\n  С: 'S',\n  Т: 'T',\n  У: 'U',\n  Ф: 'F',\n  Х: 'H',\n  Ц: 'C',\n  Ч: 'Ch',\n  Ш: 'Sh',\n  Щ: 'Sh',\n  Ъ: 'U',\n  Ы: 'Y',\n  Ь: '',\n  Э: 'E',\n  Ю: 'Yu',\n  Я: 'Ya',\n  // ukranian\n  Є: 'Ye',\n  І: 'I',\n  Ї: 'Yi',\n  Ґ: 'G',\n  є: 'ye',\n  і: 'i',\n  ї: 'yi',\n  ґ: 'g',\n  // czech\n  č: 'c',\n  ď: 'd',\n  ě: 'e',\n  ň: 'n',\n  ř: 'r',\n  š: 's',\n  ť: 't',\n  ů: 'u',\n  ž: 'z',\n  Č: 'C',\n  Ď: 'D',\n  Ě: 'E',\n  Ň: 'N',\n  Ř: 'R',\n  Š: 'S',\n  Ť: 'T',\n  Ů: 'U',\n  Ž: 'Z',\n  // polish\n  ą: 'a',\n  ć: 'c',\n  ę: 'e',\n  ł: 'l',\n  ń: 'n',\n  ś: 's',\n  ź: 'z',\n  ż: 'z',\n  Ą: 'A',\n  Ć: 'C',\n  Ę: 'E',\n  Ł: 'L',\n  Ń: 'N',\n  Ś: 'S',\n  Ź: 'Z',\n  Ż: 'Z',\n  // latvian\n  ā: 'a',\n  ē: 'e',\n  ģ: 'g',\n  ī: 'i',\n  ķ: 'k',\n  ļ: 'l',\n  ņ: 'n',\n  ū: 'u',\n  Ā: 'A',\n  Ē: 'E',\n  Ģ: 'G',\n  Ī: 'I',\n  Ķ: 'K',\n  Ļ: 'L',\n  Ņ: 'N',\n  Ū: 'U',\n  // lithuanian\n  ė: 'e',\n  į: 'i',\n  ų: 'u',\n  Ė: 'E',\n  Į: 'I',\n  Ų: 'U',\n  // romanian\n  ț: 't',\n  Ț: 'T',\n  ţ: 't',\n  Ţ: 'T',\n  ș: 's',\n  Ș: 'S',\n  ă: 'a',\n  Ă: 'A',\n  // currency\n  '€': 'euro',\n  '₢': 'cruzeiro',\n  '₣': 'french franc',\n  '£': 'pound',\n  '₤': 'lira',\n  '₥': 'mill',\n  '₦': 'naira',\n  '₧': 'peseta',\n  '₨': 'rupee',\n  '₩': 'won',\n  '₪': 'new shequel',\n  '₫': 'dong',\n  '₭': 'kip',\n  '₮': 'tugrik',\n  '₯': 'drachma',\n  '₰': 'penny',\n  '₱': 'peso',\n  '₲': 'guarani',\n  '₳': 'austral',\n  '₴': 'hryvnia',\n  '₵': 'cedi',\n  '¢': 'cent',\n  '¥': 'yen',\n  元: 'yuan',\n  円: 'yen',\n  '﷼': 'rial',\n  '₠': 'ecu',\n  '¤': 'currency',\n  '฿': 'baht',\n  $: 'dollar',\n  '₹': 'indian rupee',\n  // symbols\n  '©': '(c)',\n  œ: 'oe',\n  Œ: 'OE',\n  '∑': 'sum',\n  '®': '(r)',\n  '†': '+',\n  '“': '\"',\n  '”': '\"',\n  '‘': \"'\",\n  '’': \"'\",\n  '∂': 'd',\n  ƒ: 'f',\n  '™': 'tm',\n  '℠': 'sm',\n  '…': '...',\n  '˚': 'o',\n  º: 'o',\n  ª: 'a',\n  '•': '*',\n  '∆': 'delta',\n  '∞': 'infinity',\n  '♥': 'love',\n  '&': 'and',\n  '|': 'or',\n  '<': 'less',\n  '>': 'greater',\n  '=': 'equals'\n}\n\nslug.defaults.modes = {\n  pretty: {\n    replacement: '-',\n    symbols: true,\n    remove: /[.]/g,\n    charmap: slug.defaults.charmap,\n    multicharmap: slug.defaults.multicharmap\n  }\n}\n","'use strict'\n\nimport React from 'react'\nimport i18n from './i18n'\n\nconst userLabel = {\n\n  // formats a user label appropriately\n  format (inputConfig) {\n    let label = null\n    if (typeof inputConfig === 'string') {\n      label = inputConfig\n    } else {\n      label = i18n.trans(inputConfig)\n    }\n    if (!label) {\n      return <span className='' />\n    }\n\n    const iconData = label.match(/^\\[\\[\\s*(.*?)\\s*(;\\s*(.*?))?\\s*\\]\\]$/) // eslint-disable-line no-useless-escape\n    if (iconData) {\n      let className = 'fa fa-' + iconData[1]\n      if ((iconData[3] || '').match(/90|180|270/)) {\n        className += ' fa-rotate-' + iconData[3]\n      }\n      return <i className={className} />\n    }\n\n    return <span>{label}</span>\n  }\n}\n\nexport default userLabel\n","import jQuery from 'jquery'\n\nexport function isValidUrl (url) {\n  return !!url.match(/^(https?|ftp):\\/\\/\\S+$/)\n}\n\nfunction stripLeadingSlash (string) {\n  return string.match(/^\\/*(.*?)$/)[1]\n}\n\nfunction stripTrailingSlash (string) {\n  return string.match(/^(.*?)\\/*$/)[1]\n}\n\nfunction addToSet (originalSet, value) {\n  for (let i = 0; i < originalSet.length; i++) {\n    if (originalSet[i] === value) {\n      return originalSet\n    }\n  }\n  const rv = originalSet.slice()\n  rv.push(value)\n  return rv\n}\n\nfunction removeFromSet (originalSet, value) {\n  let rv = null\n  let off = 0\n  for (let i = 0; i < originalSet.length; i++) {\n    if (originalSet[i] === value) {\n      if (rv === null) {\n        rv = originalSet.slice()\n      }\n      rv.splice(i - (off++), 1)\n    }\n  }\n  return (rv === null) ? originalSet : rv\n}\nexport function getCanonicalUrl (localPath) {\n  return $LEKTOR_CONFIG.site_root.match(/^(.*?)\\/*$/)[1] +\n      '/' + stripLeadingSlash(localPath)\n}\n\nexport function flipSetValue (originalSet, value, isActive) {\n  if (isActive) {\n    return addToSet(originalSet || [], value)\n  } else {\n    return removeFromSet(originalSet || [], value)\n  }\n}\nexport function urlPathsConsideredEqual (a, b) {\n  if ((a == null) || (b == null)) {\n    return false\n  }\n  return stripTrailingSlash(a) === stripTrailingSlash(b)\n}\n\nexport function getApiUrl (url) {\n  return $LEKTOR_CONFIG.admin_root + '/api' + url\n}\n\nexport function getPlatform () {\n  if (navigator.appVersion.indexOf('Win') !== -1) {\n    return 'windows'\n  } else if (navigator.appVersion.indexOf('Mac') !== -1) {\n    return 'mac'\n  } else if (navigator.appVersion.indexOf('X11') !== -1 ||\n        navigator.appVersion.indexOf('Linux') !== -1) {\n    return 'linux'\n  }\n  return 'other'\n}\n\nexport function isMetaKey (event) {\n  if (getPlatform() === 'mac') {\n    return event.metaKey\n  } else {\n    return event.ctrlKey\n  }\n}\n\nexport function getParentFsPath (fsPath) {\n  return fsPath.match(/^(.*?)\\/([^/]*)$/)[1]\n}\n\nexport function fsToUrlPath (fsPath) {\n  let segments = fsPath.match(/^\\/*(.*?)\\/*$/)[1].split('/')\n  if (segments.length === 1 && segments[0] === '') {\n    segments = []\n  }\n  segments.unshift('root')\n  return segments.join(':')\n}\n\nexport function urlToFsPath (urlPath) {\n  const segments = urlPath.match(/^:*(.*?):*$/)[1].split(':')\n  if (segments.length < 1 || segments[0] !== 'root') {\n    return null\n  }\n  segments[0] = ''\n  return segments.join('/')\n}\n\nexport function fsPathFromAdminObservedPath (adminPath) {\n  const base = $LEKTOR_CONFIG.site_root.match(/^(.*?)\\/*$/)[1]\n  if (adminPath.substr(0, base.length) !== base) {\n    return null\n  }\n  return '/' + adminPath.substr(base.length).match(/^\\/*(.*?)\\/*$/)[1]\n}\n\nexport function loadData (url, params, options, createPromise) {\n  options = options || {}\n  return createPromise((resolve, reject) => {\n    jQuery.ajax({\n      url: getApiUrl(url),\n      data: params,\n      method: options.method || 'GET'\n    }).done((data) => {\n      resolve(data)\n    }).fail(() => {\n      reject({\n        code: 'REQUEST_FAILED'\n      })\n    })\n  })\n}\n\nexport function apiRequest (url, options, createPromise) {\n  options = options || {}\n  options.url = getApiUrl(url)\n  if (options.json !== undefined) {\n    options.data = JSON.stringify(options.json)\n    options.contentType = 'application/json'\n    delete options.json\n  }\n  if (!options.method) {\n    options.method = 'GET'\n  }\n\n  return createPromise((resolve, reject) => {\n    jQuery.ajax(options)\n      .done((data) => {\n        resolve(data)\n      })\n      .fail(() => {\n        reject({\n          code: 'REQUEST_FAILED'\n        })\n      })\n  })\n}\n","'use strict'\n\n/* eslint-env browser */\n\nimport React from 'react'\nimport RecordComponent from '../components/RecordComponent'\nimport hub from '../hub'\nimport { AttachmentsChangedEvent } from '../events'\nimport { loadData, getApiUrl } from '../utils'\nimport i18n from '../i18n'\nimport makeRichPromise from '../richPromise'\n\nclass AddAttachmentPage extends RecordComponent {\n  constructor (props) {\n    super(props)\n    this.state = {\n      newAttachmentInfo: null,\n      currentFiles: [],\n      isUploading: false,\n      currentProgress: 0\n    }\n  }\n\n  componentDidMount () {\n    this.syncDialog()\n  }\n\n  componentDidUpdate (nextProps) {\n    if (nextProps.match.params.path !== this.props.match.params.path) {\n      this.syncDialog()\n    }\n  }\n\n  syncDialog () {\n    loadData('/newattachment', { path: this.getRecordPath() }, null, makeRichPromise)\n      .then((resp) => {\n        this.setState({\n          newAttachmentInfo: resp\n        })\n      })\n  }\n\n  uploadFile (event) {\n    this.refs.file.click()\n  }\n\n  onUploadProgress (event) {\n    const newProgress = Math.round((event.loaded * 100) / event.total)\n    if (newProgress !== this.state.currentProgress) {\n      this.setState({\n        currentProgress: newProgress\n      })\n    }\n  }\n\n  onUploadComplete (resp, event) {\n    this.setState({\n      isUploading: false,\n      newProgress: 100\n    }, () => {\n      hub.emit(new AttachmentsChangedEvent({\n        recordPath: this.getRecordPath(),\n        attachmentsAdded: resp.buckets.map((bucket) => {\n          return bucket.stored_filename\n        })\n      }))\n    })\n  }\n\n  onFileSelected (event) {\n    if (this.state.isUploading) {\n      return\n    }\n\n    const files = this.refs.file.files\n    this.setState({\n      currentFiles: Array.prototype.slice.call(files, 0),\n      isUploading: true\n    })\n\n    const formData = new FormData()\n    formData.append('path', this.getRecordPath())\n\n    for (let i = 0; i < files.length; i++) {\n      formData.append('file', files[i], files[i].name)\n    }\n\n    const xhr = new XMLHttpRequest()\n    xhr.open('POST', getApiUrl('/newattachment'))\n    xhr.onload = (event) => {\n      this.onUploadComplete(JSON.parse(xhr.responseText), event)\n    }\n    xhr.upload.onprogress = (event) => {\n      this.onUploadProgress(event)\n    }\n    xhr.send(formData)\n  }\n\n  renderCurrentFiles () {\n    const files = this.state.currentFiles.map((file) => {\n      return (\n        <li key={file.name}>{file.name} ({file.type})</li>\n      )\n    })\n    return <ul>{files}</ul>\n  }\n\n  render () {\n    const nai = this.state.newAttachmentInfo\n\n    if (!nai) {\n      return null\n    }\n\n    return (\n      <div>\n        <h2>{i18n.trans('ADD_ATTACHMENT_TO').replace('%s', nai.label)}</h2>\n        <p>{i18n.trans('ADD_ATTACHMENT_NOTE')}</p>\n        {this.renderCurrentFiles()}\n        <p>{i18n.trans('PROGRESS')}: {this.state.currentProgress}%</p>\n        <input\n          type='file' ref='file' multiple\n          style={{ display: 'none' }} onChange={this.onFileSelected.bind(this)}\n        />\n        <div className='actions'>\n          <button className='btn btn-primary' onClick={this.uploadFile.bind(this)}>{\n            i18n.trans('UPLOAD')\n          }\n          </button>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default AddAttachmentPage\n","'use strict'\n\n/* eslint-env browser */\n\nimport React from 'react'\nimport RecordComponent from '../components/RecordComponent'\nimport i18n from '../i18n'\nimport userLabel from '../userLabel'\nimport { apiRequest, loadData } from '../utils'\nimport { slug as slugify } from '../slugify'\nimport { getWidgetComponentWithFallback } from '../widgets'\nimport makeRichPromise from '../richPromise'\n\nconst getGoodDefaultModel = (models) => {\n  if (models.page !== undefined) {\n    return 'page'\n  }\n  const choices = Object.keys(models)\n  choices.sort()\n  return choices[0]\n}\n\nclass AddChildPage extends RecordComponent {\n  constructor (props) {\n    super(props)\n    this.state = {\n      newChildInfo: null,\n      id: undefined,\n      selectedModel: null\n    }\n  }\n\n  componentDidMount () {\n    super.componentDidMount()\n    this.syncDialog()\n  }\n\n  componentDidUpdate (nextProps) {\n    if (nextProps.match.params.path !== this.props.match.params.path) {\n      this.syncDialog()\n    }\n  }\n\n  syncDialog () {\n    loadData('/newrecord', { path: this.getRecordPath() }, null, makeRichPromise)\n      .then((resp) => {\n        let selectedModel = resp.implied_model\n        if (!selectedModel) {\n          selectedModel = getGoodDefaultModel(resp.available_models)\n        }\n\n        this.setState({\n          newChildInfo: resp,\n          id: undefined,\n          primary: undefined,\n          selectedModel: selectedModel\n        })\n      })\n  }\n\n  onValueChange (id, value) {\n    const obj = {}\n    obj[id] = value\n    this.setState(obj)\n  }\n\n  getAvailableModels () {\n    const rv = []\n    for (const key in this.state.newChildInfo.available_models) {\n      const model = this.state.newChildInfo.available_models[key]\n      rv.push(model)\n    }\n    rv.sort((a, b) => {\n      return a.name.toLowerCase().localeCompare(b.name.toLowerCase())\n    })\n    return rv\n  }\n\n  onModelSelected (event) {\n    this.setState({\n      selectedModel: event.target.value\n    })\n  }\n\n  getImpliedId () {\n    return slugify(this.state.primary || '').toLowerCase()\n  }\n\n  getPrimaryField () {\n    const model = this.state.selectedModel\n    return this.state.newChildInfo.available_models[model].primary_field\n  }\n\n  createRecord () {\n    const errMsg = (text) => {\n      alert(i18n.trans('ERROR_PREFIX') + text)\n    }\n\n    const id = this.state.id || this.getImpliedId()\n    if (!id) {\n      errMsg(i18n.trans('ERROR_NO_ID_PROVIDED'))\n      return\n    }\n\n    const data = {}\n    const params = { id: id, path: this.getRecordPath(), data: data }\n    if (!this.state.newChildInfo.implied_model) {\n      data._model = this.state.selectedModel\n    }\n    const primaryField = this.getPrimaryField()\n    if (primaryField) {\n      data[primaryField.name] = this.state.primary\n    }\n\n    apiRequest('/newrecord', { json: params, method: 'POST' }, makeRichPromise)\n      .then((resp) => {\n        if (resp.exists) {\n          errMsg(i18n.trans('ERROR_PAGE_ID_DUPLICATE').replace('%s', id))\n        } else if (!resp.valid_id) {\n          errMsg(i18n.trans('ERROR_INVALID_ID').replace('%s', id))\n        } else {\n          const urlPath = this.getUrlRecordPathWithAlt(resp.path)\n          this.transitionToAdminPage('.edit', { path: urlPath })\n        }\n      })\n  }\n\n  renderFields () {\n    const fields = []\n\n    if (!this.state.newChildInfo.implied_model) {\n      const choices = this.getAvailableModels().map((model) => {\n        return (\n          <option value={model.id} key={model.id}>{i18n.trans(model.name_i18n)}</option>\n        )\n      })\n      fields.push(\n        <div className='row' key='_model'>\n          <div className='field-box col-md-12'>\n            <dl className='field'>\n              <dt>{i18n.trans('MODEL')}</dt>\n              <dd>\n                <select\n                  value={this.state.selectedModel}\n                  className='form-control'\n                  onChange={this.onModelSelected.bind(this)}\n                >\n                  {choices}\n                </select>\n              </dd>\n            </dl>\n          </div>\n        </div>\n      )\n    }\n\n    const addField = (id, field, placeholder) => {\n      let value = this.state[id]\n      const Widget = getWidgetComponentWithFallback(field.type)\n      if (Widget.deserializeValue) {\n        value = Widget.deserializeValue(value, field.type)\n      }\n      fields.push(\n        <div className='row field-row' key={field.name}>\n          <div className='field-box col-md-12'>\n            <dl className='field'>\n              <dt>{userLabel.format(field.label_i18n || field.label)}</dt>\n              <dd>\n                <Widget\n                  value={value}\n                  placeholder={placeholder}\n                  onChange={this.onValueChange.bind(this, id)}\n                  type={field.type}\n                />\n              </dd>\n            </dl>\n          </div>\n        </div>\n      )\n    }\n\n    const primaryField = this.getPrimaryField()\n    if (primaryField) {\n      addField('primary', primaryField)\n    }\n\n    addField('id', {\n      name: '_id',\n      label: i18n.trans('ID'),\n      type: { name: 'slug', widget: 'slug' }\n    }, this.getImpliedId())\n\n    return fields\n  }\n\n  render () {\n    const nci = this.state.newChildInfo\n\n    if (!nci) {\n      return null\n    }\n\n    return (\n      <div className='edit-area'>\n        <h2>{i18n.trans('ADD_CHILD_PAGE_TO').replace(\n          '%s', this.state.newChildInfo.label)}\n        </h2>\n        <p>{i18n.trans('ADD_CHILD_PAGE_NOTE')}</p>\n        {this.renderFields()}\n        <div className='actions'>\n          <button\n            className='btn btn-primary' onClick={\n              this.createRecord.bind(this)\n            }\n          >{i18n.trans('CREATE_CHILD_PAGE')}\n          </button>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default AddChildPage\n","'use strict'\n\nimport React from 'react'\nimport { Route } from 'react-router-dom'\n\nimport BreadCrumbs from '../components/BreadCrumbs'\nimport Sidebar from '../components/Sidebar'\nimport DialogSlot from '../components/DialogSlot'\nimport ServerStatus from '../components/ServerStatus'\n\nfunction Header (props) {\n  return (\n    <header>\n      <BreadCrumbs {...props}>\n        <button\n          type='button' className='navbar-toggle'\n          data-toggle='offcanvas'\n          data-target='.sidebar-block'\n        >\n          <span className='sr-only'>Toggle navigation</span>\n          <span className='icon-list' />\n          <span className='icon-list' />\n          <span className='icon-list' />\n        </button>\n      </BreadCrumbs>\n    </header>\n  )\n}\n\nfunction App (props) {\n  const fullPath = `${props.match.path}/:path/:page`\n  return (\n    <div className='application'>\n      <ServerStatus />\n      <Route path={fullPath} component={Header} />\n      <div className='editor container'>\n        <Route path={fullPath} component={DialogSlot} />\n        <div className='sidebar-block block-offcanvas block-offcanvas-left'>\n          <nav className='sidebar col-md-2 col-sm-3 sidebar-offcanvas'>\n            <Route path={fullPath} component={Sidebar} />\n          </nav>\n          <div className='view col-md-10 col-sm-9'>\n            {props.children}\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default App\n","'use strict'\n\nimport React from 'react'\nimport RecordComponent from '../components/RecordComponent'\nimport { apiRequest, loadData, getParentFsPath } from '../utils'\nimport i18n from '../i18n'\nimport hub from '../hub'\nimport { AttachmentsChangedEvent } from '../events'\nimport makeRichPromise from '../richPromise'\n\nclass DeletePage extends RecordComponent {\n  constructor (props) {\n    super(props)\n\n    this.state = {\n      recordInfo: null,\n      deleteMasterRecord: true\n    }\n  }\n\n  componentDidMount () {\n    super.componentDidMount()\n    this.syncDialog()\n  }\n\n  componentDidUpdate (nextProps) {\n    if (nextProps.match.params.path !== this.props.match.params.path) {\n      this.syncDialog()\n    }\n  }\n\n  syncDialog () {\n    loadData('/recordinfo', { path: this.getRecordPath() }, null, makeRichPromise)\n      .then((resp) => {\n        this.setState({\n          recordInfo: resp,\n          deleteMasterRecord: this.isPrimary()\n        })\n      })\n  }\n\n  deleteRecord (event) {\n    const path = this.getRecordPath()\n    const parent = getParentFsPath(path)\n    let targetPath\n    if (parent === null) {\n      targetPath = 'root'\n    } else {\n      targetPath = this.getUrlRecordPathWithAlt(parent)\n    }\n\n    apiRequest('/deleterecord', {\n      data: {\n        path: path,\n        alt: this.getRecordAlt(),\n        delete_master: this.state.deleteMasterRecord ? '1' : '0'\n      },\n      // eslint-disable-next-line indent\n      method: 'POST'\n    }, makeRichPromise)\n      .then((resp) => {\n        if (this.state.recordInfo.is_attachment) {\n          hub.emit(new AttachmentsChangedEvent({\n            recordPath: this.getParentRecordPath(),\n            attachmentsRemoved: [this.state.recordInfo.id]\n          }))\n        }\n        this.transitionToAdminPage('.edit', { path: targetPath })\n      })\n  }\n\n  cancelDelete (event) {\n    const urlPath = this.getUrlRecordPathWithAlt()\n    this.transitionToAdminPage('.edit', { path: urlPath })\n  }\n\n  onDeleteAllAltsChange (event) {\n    this.setState({\n      deleteMasterRecord: event.target.value === '1'\n    })\n  }\n\n  isPrimary () {\n    return this.getRecordAlt() === '_primary'\n  }\n\n  render () {\n    const ri = this.state.recordInfo\n\n    if (!ri || !ri.can_be_deleted) {\n      return null\n    }\n\n    const elements = []\n    let children = []\n    const alts = []\n    let attachments = []\n    let altInfo = null\n    let altCount = 0\n\n    for (let i = 0; i < ri.alts.length; i++) {\n      if (ri.alts[i].alt === this.getRecordAlt()) {\n        altInfo = ri.alts[i]\n      }\n      if (ri.alts[i].exists) {\n        altCount++\n      }\n    }\n\n    if (ri.is_attachment) {\n      elements.push(\n        <p key='attachment'>\n          {this.isPrimary() ? i18n.trans('DELETE_ATTACHMENT_PROMPT')\n            : i18n.trans('DELETE_ATTACHMENT_ALT_PROMPT')}{' '}\n        </p>\n      )\n    } else {\n      elements.push(\n        <p key='child-info'>\n          {this.isPrimary() ? i18n.trans('DELETE_PAGE_PROMPT')\n            : i18n.trans('DELETE_PAGE_ALT_PROMPT')}{' '}\n          {ri.children.length > 0 && this.isPrimary()\n            ? i18n.trans('DELETE_PAGE_CHILDREN_WARNING') : null}\n        </p>\n      )\n\n      if (ri.children.length > 0) {\n        children = ri.children.map((child) => {\n          return (\n            <li key={child.id}>{i18n.trans(child.label_i18n)}</li>\n          )\n        })\n        if (ri.child_count > children.length) {\n          children.push(<li key='...'>...</li>)\n        }\n      }\n\n      attachments = ri.attachments.map((atch) => {\n        return (\n          <li key={atch.id}>{atch.id} ({atch.type})</li>\n        )\n      })\n    }\n\n    if (altCount > 1 && this.getRecordAlt() === '_primary') {\n      ri.alts.forEach((item) => {\n        if (!item.exists) {\n          return\n        }\n        let title = i18n.trans(item.name_i18n)\n        if (item.is_primary) {\n          title += ' (' + i18n.trans('PRIMARY_ALT') + ')'\n        } else if (item.primary_overlay) {\n          title += ' (' + i18n.trans('PRIMARY_OVERLAY') + ')'\n        }\n        alts.push(<li key={item.alt}>{title}</li>)\n      })\n      elements.push(\n        <p key='alt-warning'>{i18n.trans('DELETE_PRIMARY_ALT_INFO')}</p>\n      )\n      elements.push(\n        <ul key='delete-all-alts'>\n          <li>\n            <input\n              type='radio' id='delete-all-alts' value='1' name='delete-master-record' checked={\n                this.state.deleteMasterRecord\n              } onChange={this.onDeleteAllAltsChange.bind(this)}\n            />{' '}\n            <label htmlFor='delete-all-alts'>{i18n.trans(\n              ri.is_attachment ? 'DELETE_ALL_ATTACHMENT_ALTS' : 'DELETE_ALL_PAGE_ALTS')}\n            </label>\n          </li>\n          <li>\n            <input\n              type='radio' id='delete-only-this-alt' value='0' name='delete-master-record' checked={\n                !this.state.deleteMasterRecord\n              } onChange={this.onDeleteAllAltsChange.bind(this)}\n            />{' '}\n            <label htmlFor='delete-only-this-alt'>{i18n.trans(\n              ri.is_attachment ? 'DELETE_ONLY_PRIMARY_ATTACHMENT_ALT' : 'DELETE_ONLY_PRIMARY_PAGE_ALT')}\n            </label>\n          </li>\n        </ul>\n      )\n    }\n\n    let label = ri.label_i18n ? i18n.trans(ri.label_i18n) : ri.id\n    if (this.getRecordAlt() !== '_primary' && altInfo != null) {\n      label += ' (' + i18n.trans(altInfo.name_i18n) + ')'\n    }\n\n    return (\n      <div>\n        <h2>{i18n.trans('DELETE_RECORD').replace('%s', label)}</h2>\n        {elements}\n        <div style={{ display: this.state.deleteMasterRecord && alts.length > 0 ? 'block' : 'none' }}>\n          <h4>{i18n.trans('ALTS_TO_BE_DELETED')}</h4>\n          <ul>\n            {alts}\n          </ul>\n        </div>\n        <div style={{ display: this.state.deleteMasterRecord && children.length > 0 ? 'block' : 'none' }}>\n          <h4>{i18n.trans('CHILD_PAGES_TO_BE_DELETED')}</h4>\n          <ul>\n            {children}\n          </ul>\n        </div>\n        <div style={{ display: this.state.deleteMasterRecord && attachments.length > 0 ? 'block' : 'none' }}>\n          <h4>{i18n.trans('ATTACHMENTS_TO_BE_DELETED')}</h4>\n          <ul>\n            {attachments}\n          </ul>\n        </div>\n        <div className='actions'>\n          <button\n            className='btn btn-primary'\n            onClick={this.deleteRecord.bind(this)}\n          >{i18n.trans('YES_DELETE')}\n          </button>\n          <button\n            className='btn btn-default'\n            onClick={this.cancelDelete.bind(this)}\n          >{i18n.trans('NO_CANCEL')}\n          </button>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default DeletePage\n","'use strict'\n\nimport React from 'react'\nimport { Prompt } from 'react-router-dom'\n\nimport RecordComponent from '../components/RecordComponent'\nimport { apiRequest, loadData, isMetaKey } from '../utils'\nimport i18n from '../i18n'\nimport { getWidgetComponentWithFallback, FieldBox, FieldRows } from '../widgets'\nimport makeRichPromise from '../richPromise'\n\nclass EditPage extends RecordComponent {\n  constructor (props) {\n    super(props)\n\n    this.state = {\n      recordData: null,\n      recordDataModel: null,\n      recordInfo: null,\n      hasPendingChanges: false\n    }\n    this._onKeyPress = this._onKeyPress.bind(this)\n    this.setFieldValue = this.setFieldValue.bind(this)\n    this.form = React.createRef()\n  }\n\n  componentDidMount () {\n    super.componentDidMount()\n    this.syncEditor()\n    window.addEventListener('keydown', this._onKeyPress)\n  }\n\n  componentDidUpdate (prevProps, prevState) {\n    if (prevProps.match.params.path !== this.props.match.params.path) {\n      this.syncEditor()\n    }\n  }\n\n  componentWillUnmount () {\n    window.removeEventListener('keydown', this._onKeyPress)\n  }\n\n  _onKeyPress (event) {\n    // meta+s is open find files\n    if (event.which === 83 && isMetaKey(event)) {\n      event.preventDefault()\n      const { current } = this.form\n      if (current && current.reportValidity()) {\n        this.saveChanges()\n      }\n    }\n  }\n\n  isIllegalField (field) {\n    switch (field.name) {\n      case '_id':\n      case '_path':\n      case '_gid':\n      case '_alt':\n      case '_source_alt':\n      case '_model':\n      case '_attachment_for':\n        return true\n      case '_attachment_type':\n        return !this.state.recordInfo.is_attachment\n    }\n    return false\n  }\n\n  syncEditor () {\n    loadData('/rawrecord', {\n      path: this.getRecordPath(),\n      alt: this.getRecordAlt()\n    }, null, makeRichPromise)\n      .then((resp) => {\n        // transform resp.data into actual data\n        const recordData = {}\n        resp.datamodel.fields.forEach(field => {\n          const widget = getWidgetComponentWithFallback(field.type)\n          let value = resp.data[field.name]\n          if (value !== undefined) {\n            if (widget.deserializeValue) {\n              value = widget.deserializeValue(value, field.type)\n            }\n            recordData[field.name] = value\n          }\n        })\n        this.setState({\n          recordData,\n          recordDataModel: resp.datamodel,\n          recordInfo: resp.record_info,\n          hasPendingChanges: false\n        })\n      })\n  }\n\n  setFieldValue (field, value) {\n    const rd = { ...this.state.recordData, [field.name]: value || '' }\n    this.setState({\n      recordData: rd,\n      hasPendingChanges: true\n    })\n  }\n\n  getValues () {\n    const rv = {}\n    this.state.recordDataModel.fields.forEach((field) => {\n      if (this.isIllegalField(field)) {\n        return\n      }\n\n      let value = this.state.recordData[field.name]\n\n      if (value !== undefined) {\n        const Widget = getWidgetComponentWithFallback(field.type)\n        if (Widget.serializeValue) {\n          value = Widget.serializeValue(value, field.type)\n        }\n      } else {\n        value = null\n      }\n\n      rv[field.name] = value\n    })\n\n    return rv\n  }\n\n  saveChanges (event) {\n    if (event) {\n      event.preventDefault()\n    }\n\n    const path = this.getRecordPath()\n    const alt = this.getRecordAlt()\n    const newData = this.getValues()\n    apiRequest('/rawrecord', {\n      json: { data: newData, path: path, alt: alt },\n      // eslint-disable-next-line indent\n      method: 'PUT'\n    }, makeRichPromise)\n      .then((resp) => {\n        this.setState({\n          hasPendingChanges: false\n        }, () => {\n          this.transitionToAdminPage('.preview', {\n            path: this.getUrlRecordPathWithAlt(path)\n          })\n        })\n      })\n  }\n\n  deleteRecord (event) {\n    this.transitionToAdminPage('.delete', {\n      path: this.getUrlRecordPathWithAlt()\n    })\n  }\n\n  getValueForField (widget, field) {\n    let value = this.state.recordData[field.name]\n    if (value === undefined) {\n      value = ''\n      if (widget.deserializeValue) {\n        value = widget.deserializeValue(value, field.type)\n      }\n    }\n    return value\n  }\n\n  getPlaceholderForField (widget, field) {\n    if (field.default !== null) {\n      if (widget.deserializeValue) {\n        return widget.deserializeValue(field.default, field.type)\n      }\n      return field.default\n    } else if (field.name === '_slug') {\n      return this.state.recordInfo.slug_format\n    } else if (field.name === '_template') {\n      return this.state.recordInfo.default_template\n    } else if (field.name === '_attachment_type') {\n      return this.state.recordInfo.implied_attachment_type\n    }\n    return null\n  }\n\n  renderFormField (field) {\n    const widget = getWidgetComponentWithFallback(field.type)\n    return (\n      <FieldBox\n        key={field.name}\n        value={this.getValueForField(widget, field)}\n        placeholder={this.getPlaceholderForField(widget, field)}\n        field={field}\n        setFieldValue={this.setFieldValue}\n        disabled={!(field.alts_enabled == null || (field.alts_enabled ^ this.state.recordInfo.alt === '_primary'))}\n      />\n    )\n  }\n\n  render () {\n    // we have not loaded anything yet.\n    if (this.state.recordInfo === null) {\n      return null\n    }\n\n    const deleteButton = this.state.recordInfo.can_be_deleted\n      ? (\n        <button type='button' className='btn btn-default' onClick={this.deleteRecord.bind(this)}>\n          {i18n.trans('DELETE')}\n        </button>\n      )\n      : null\n\n    const title = this.state.recordInfo.is_attachment\n      ? i18n.trans('EDIT_ATTACHMENT_METADATA_OF')\n      : i18n.trans('EDIT_PAGE_NAME')\n\n    const label = this.state.recordInfo.label_i18n\n      ? i18n.trans(this.state.recordInfo.label_i18n)\n      : this.state.recordInfo.label\n\n    const fields = this.state.recordDataModel.fields.filter(f => !this.isIllegalField(f))\n    return (\n      <div className='edit-area'>\n        {this.state.hasPendingChanges && <Prompt message={() => i18n.trans('UNLOAD_ACTIVE_TAB')} />}\n        <h2>{title.replace('%s', label)}</h2>\n        <form ref={this.form} onSubmit={this.saveChanges.bind(this)}>\n          <FieldRows\n            fields={fields}\n            renderFunc={this.renderFormField.bind(this)}\n          />\n          <div className='actions'>\n            <button type='submit' className='btn btn-primary'>\n              {i18n.trans('SAVE_CHANGES')}\n            </button>\n            {deleteButton}\n          </div>\n        </form>\n      </div>\n    )\n  }\n}\n\nexport default EditPage\n","'use strict'\n\nimport React from 'react'\nimport { loadData, fsPathFromAdminObservedPath, getCanonicalUrl, urlPathsConsideredEqual } from '../utils'\nimport RecordComponent from '../components/RecordComponent'\nimport makeRichPromise from '../richPromise'\n\nclass PreviewPage extends RecordComponent {\n  constructor (props) {\n    super(props)\n    this.state = {\n      pageUrl: null,\n      pageUrlFor: null\n    }\n  }\n\n  componentDidMount () {\n    super.componentDidMount()\n    this.syncState()\n  }\n\n  shouldComponentUpdate () {\n    return this.getUrlRecordPathWithAlt() !== this.state.pageUrlFor\n  }\n\n  syncState () {\n    const alt = this.getRecordAlt()\n    const path = this.getRecordPath()\n    if (path === null) {\n      this.setState(this.getInitialState())\n      return\n    }\n\n    const recordUrl = this.getUrlRecordPathWithAlt()\n    loadData('/previewinfo', { path: path, alt: alt }, null, makeRichPromise)\n      .then((resp) => {\n        this.setState({\n          pageUrl: resp.url,\n          pageUrlFor: recordUrl\n        })\n      })\n  }\n\n  getIntendedPath () {\n    if (this.state.pageUrlFor === this.getUrlRecordPathWithAlt()) {\n      return this.state.pageUrl\n    }\n    return null\n  }\n\n  componentDidUpdate (nextProps) {\n    if (nextProps.match.params.path !== this.props.match.params.path) {\n      this.setState({}, this.syncState.bind(this))\n    }\n    const frame = this.refs.iframe\n    const intendedPath = this.getIntendedPath()\n    if (intendedPath !== null) {\n      const framePath = this.getFramePath()\n\n      if (!urlPathsConsideredEqual(intendedPath, framePath)) {\n        frame.src = getCanonicalUrl(intendedPath)\n      }\n\n      frame.onload = (event) => {\n        this.onFrameNavigated()\n      }\n    }\n  }\n\n  getFramePath () {\n    const frameLocation = this.refs.iframe.contentWindow.location\n    if (frameLocation.href === 'about:blank') {\n      return frameLocation.href\n    }\n    return fsPathFromAdminObservedPath(\n      frameLocation.pathname)\n  }\n\n  onFrameNavigated () {\n    const fsPath = this.getFramePath()\n    if (fsPath === null) {\n      return\n    }\n    loadData('/matchurl', { url_path: fsPath }, null, makeRichPromise)\n      .then((resp) => {\n        if (resp.exists) {\n          const urlPath = this.getUrlRecordPathWithAlt(resp.path, resp.alt)\n          this.transitionToAdminPage('.preview', { path: urlPath })\n        }\n      })\n  }\n\n  render () {\n    return (\n      <div className='preview'>\n        <iframe ref='iframe' />\n      </div>\n    )\n  }\n}\n\nexport default PreviewPage\n","'use strict'\n\nimport PropTypes from 'prop-types'\nimport React from 'react'\nimport { DateInputWidget, IntegerInputWidget, FloatInputWidget, UrlInputWidget, SlugInputWidget, BooleanInputWidget, MultiLineTextInputWidget, SingleLineTextInputWidget } from './widgets/primitiveWidgets'\nimport { CheckboxesInputWidget, SelectInputWidget } from './widgets/multiWidgets'\nimport { FlowWidget } from './widgets/flowWidget'\nimport { LineWidget, SpacingWidget, InfoWidget, HeadingWidget } from './widgets/fakeWidgets'\nimport { widgetPropTypes } from './widgets/mixins'\nimport ToggleGroup from './components/ToggleGroup'\nimport i18n from './i18n'\n\nconst widgetComponents = {\n  'singleline-text': SingleLineTextInputWidget,\n  'multiline-text': MultiLineTextInputWidget,\n  datepicker: DateInputWidget,\n  integer: IntegerInputWidget,\n  float: FloatInputWidget,\n  checkbox: BooleanInputWidget,\n  url: UrlInputWidget,\n  slug: SlugInputWidget,\n  flow: FlowWidget,\n  checkboxes: CheckboxesInputWidget,\n  select: SelectInputWidget,\n  'f-line': LineWidget,\n  'f-spacing': SpacingWidget,\n  'f-info': InfoWidget,\n  'f-heading': HeadingWidget\n}\n\nfunction FallbackWidget (props) {\n  return (\n    <div>\n      <em>\n        Widget \"{props.type.widget}\" not implemented\n        (used by type \"{props.type.name}\")\n      </em>\n    </div>\n  )\n}\nFallbackWidget.propTypes = widgetPropTypes\n\n/**\n * An input widget wrapped in a <div> with description and label.\n */\nexport const FieldBox = React.memo(function FieldBox (props) {\n  const { field, value, placeholder, disabled } = props\n  const onChange = props.onChange ? props.onChange : (value) => props.setFieldValue(field, value)\n  const className = 'col-md-' + getFieldColumns(field) + ' field-box'\n  let innerClassName = 'field'\n\n  if (field.name.substr(0, 1) === '_') {\n    innerClassName += ' system-field'\n  }\n\n  const Widget = getWidgetComponentWithFallback(field.type)\n  if (Widget.isFakeWidget) {\n    return (\n      <div className={className} key={field.name}>\n        <Widget key={field.name} type={field.type} field={field} />\n      </div>\n    )\n  }\n\n  const description = field.description_i18n\n    ? (\n      <div className='help-text'>\n        {i18n.trans(field.description_i18n)}\n      </div>\n    )\n    : null\n\n  return (\n    <div className={className} key={field.name}>\n      <dl className={innerClassName}>\n        {!field.hide_label ? <dt>{i18n.trans(field.label_i18n)}</dt> : null}\n        <dd>{description}\n          <Widget\n            value={value}\n            onChange={onChange}\n            type={field.type}\n            placeholder={placeholder}\n            disabled={disabled}\n          />\n        </dd>\n      </dl>\n    </div>\n  )\n})\n\nFieldBox.propTypes = {\n  value: PropTypes.any,\n  onChange: PropTypes.func,\n  field: PropTypes.any,\n  placeholder: PropTypes.any\n}\n\nexport function getWidgetComponent (type) {\n  return widgetComponents[type.widget] || null\n}\n\nexport function getWidgetComponentWithFallback (type) {\n  return widgetComponents[type.widget] || FallbackWidget\n}\n\n/**\n * Get the width of a field in columns.\n */\nfunction getFieldColumns (field) {\n  const widthSpec = (field.type.width || '1/1').split('/')\n  return Math.min(12, Math.max(2, parseInt(\n    12 * +widthSpec[0] / +widthSpec[1])))\n}\n\n/**\n * Process fields into rows.\n */\nfunction processFields (fields) {\n  const rows = []\n  let currentColumns = 0\n  let row = []\n\n  fields.forEach((field) => {\n    const columns = getFieldColumns(field)\n    if (columns + currentColumns > 12) {\n      rows.push(row)\n      currentColumns = 0\n      row = []\n    }\n    row.push(field)\n    currentColumns += columns\n  })\n\n  if (row.length > 0) {\n    rows.push(row)\n  }\n  return rows\n}\n\n/**\n * Split the fields into normal and system fields and process into rows.\n */\nfunction getFieldRows (fields) {\n  const normalFields = []\n  const systemFields = []\n\n  fields.forEach((field) => {\n    if (field.name.substr(0, 1) === '_') {\n      systemFields.push(field)\n    } else {\n      normalFields.push(field)\n    }\n  })\n\n  return [processFields(normalFields), processFields(systemFields)]\n}\n\n/**\n * Render field rows using a render function.\n */\nexport function FieldRows ({ fields, renderFunc }) {\n  const [normalRows, systemRows] = getFieldRows(fields)\n\n  return (\n    <>\n      {normalRows.map((row, idx) => (\n        <div className='row field-row' key={'normal-' + idx}>\n          {row.map(renderFunc)}\n        </div>\n      ))}\n      {systemRows.length > 1\n        ? (\n          <ToggleGroup\n            key='sys'\n            groupTitle={i18n.trans('SYSTEM_FIELDS')}\n            defaultVisibility={false}\n          >\n            {systemRows.map((row, idx) => (\n              <div className='row field-row' key={'system-' + idx}>\n                {row.map(renderFunc)}\n              </div>\n            ))}\n          </ToggleGroup>\n        ) : null}\n    </>\n  )\n}\n","'use strict'\n\nimport { widgetPropTypes } from './mixins'\nimport React from 'react'\nimport i18n from '../i18n'\n\nexport function LineWidget () {\n  return <hr />\n}\nLineWidget.isFakeWidget = true\nLineWidget.propTypes = widgetPropTypes\n\nexport function SpacingWidget () {\n  return <div className='spacing' />\n}\nSpacingWidget.isFakeWidget = true\nSpacingWidget.propTypes = widgetPropTypes\n\nexport function InfoWidget (props) {\n  const label = i18n.trans(props.field.label_i18n)\n  return (\n    <div className='info'>\n      <p>\n        {label ? <strong>{label + ': '}</strong> : null}\n        {i18n.trans(props.field.description_i18n)}\n      </p>\n    </div>\n  )\n}\nInfoWidget.isFakeWidget = true\nInfoWidget.propTypes = widgetPropTypes\n\nexport function HeadingWidget (props) {\n  return (\n    <h3>{i18n.trans(props.type.heading_i18n)}</h3>\n  )\n}\nHeadingWidget.isFakeWidget = true\nHeadingWidget.propTypes = widgetPropTypes\n","'use strict'\n\n/* eslint-env browser */\n\nimport React from 'react'\nimport i18n from '../i18n'\nimport metaformat from '../metaformat'\nimport { widgetPropTypes } from './mixins'\nimport userLabel from '../userLabel'\nimport { getWidgetComponent, getWidgetComponentWithFallback, FieldBox, FieldRows } from '../widgets'\n\nconst parseFlowFormat = (value) => {\n  const blocks = []\n  let buf = []\n  const lines = value.split(/\\r?\\n/)\n  let block = null\n\n  for (const line of lines) {\n    // leading whitespace is ignored.\n    if (block === null && line.match(/^\\s*$/)) {\n      continue\n    }\n\n    const blockStart = line.match(/^####\\s*([^#]*?)\\s*####\\s*$/)\n    if (!blockStart) {\n      if (block === null) {\n        // bad format :(\n        return null\n      }\n    } else {\n      if (block !== null) {\n        blocks.push([block, buf])\n        buf = []\n      }\n      block = blockStart[1]\n      continue\n    }\n\n    buf.push(line.replace(/^#####(.*?)#####$/, '####$1####'))\n  }\n\n  if (block !== null) {\n    blocks.push([block, buf])\n  }\n\n  return blocks\n}\n\nconst serializeFlowFormat = (blocks) => {\n  let rv = []\n  blocks.forEach((block) => {\n    const [blockName, lines] = block\n    rv.push('#### ' + blockName + ' ####\\n')\n    lines.forEach((line) => {\n      rv.push(line.replace(/^(####(.*)####)(\\r?\\n)?$/, '#$1#$3'))\n    })\n  })\n\n  rv = rv.join('')\n\n  /* we need to chop of the last newline if it exists because this would\n     otherwise add a newline to the last block.  This is just a side effect\n     of how we serialize the meta format internally */\n  if (rv[rv.length - 1] === '\\n') {\n    rv = rv.substr(0, rv.length - 1)\n  }\n\n  return rv\n}\n\nconst deserializeFlowBlock = (flowBlockModel, lines, localId) => {\n  const data = {}\n  const rawData = {}\n\n  metaformat.tokenize(lines).forEach((item) => {\n    const [key, lines] = item\n    const value = lines.join('')\n    rawData[key] = value\n  })\n\n  flowBlockModel.fields.forEach((field) => {\n    let value = rawData[field.name] || ''\n    const Widget = getWidgetComponent(field.type)\n    if (!value && field.default) {\n      value = field.default\n    }\n    if (Widget && Widget.deserializeValue) {\n      value = Widget.deserializeValue(value, field.type)\n    }\n    data[field.name] = value\n  })\n\n  return {\n    localId: localId || null,\n    flowBlockModel: flowBlockModel,\n    data: data\n  }\n}\n\nconst serializeFlowBlock = (flockBlockModel, data) => {\n  const rv = []\n  flockBlockModel.fields.forEach((field) => {\n    const Widget = getWidgetComponent(field.type)\n    if (Widget === null) {\n      return\n    }\n\n    let value = data[field.name]\n    if (value === undefined || value === null) {\n      return\n    }\n\n    if (Widget.serializeValue) {\n      value = Widget.serializeValue(value, field.type)\n    }\n\n    rv.push([field.name, value])\n  })\n  return metaformat.serialize(rv)\n}\n\nexport class FlowWidget extends React.PureComponent {\n  static deserializeValue (value, type) {\n    let blockId = 0\n    return parseFlowFormat(value).map((item) => {\n      const [id, lines] = item\n      const flowBlock = type.flowblocks[id]\n      if (flowBlock !== undefined) {\n        return deserializeFlowBlock(flowBlock, lines, ++blockId)\n      }\n      return null\n    })\n  }\n\n  static serializeValue (value) {\n    return serializeFlowFormat(value.map((item) => {\n      return [\n        item.flowBlockModel.id,\n        serializeFlowBlock(item.flowBlockModel, item.data)\n      ]\n    }))\n  }\n\n  moveBlock (idx, offset) {\n    const newIndex = idx + offset\n    if (newIndex < 0 || newIndex >= this.props.value.length) {\n      return\n    }\n\n    const newValue = [...this.props.value]\n    newValue[newIndex] = this.props.value[idx]\n    newValue[idx] = this.props.value[newIndex]\n\n    this.props.onChange(newValue)\n  }\n\n  removeBlock (idx) {\n    if (confirm(i18n.trans('REMOVE_FLOWBLOCK_PROMPT'))) {\n      this.props.onChange(this.props.value.filter((item, i) => i !== idx))\n    }\n  }\n\n  addNewBlock (key) {\n    const flowBlockModel = this.props.type.flowblocks[key]\n\n    // find the first available id for this new block - use findMax + 1\n    const blockIds = this.props.value.map(block => block.localId)\n    const newBlockId = Math.max(...blockIds) + 1\n\n    // this is a rather ugly way to do this, but hey, it works.\n    const newValue = [\n      ...this.props.value,\n      deserializeFlowBlock(flowBlockModel, [], newBlockId)\n    ]\n    this.props.onChange(newValue)\n  }\n\n  toggleBlock (idx) {\n    const { collapsed } = this.props.value[idx]\n    const newValue = [...this.props.value]\n    newValue[idx] = { ...this.props.value[idx], collapsed: !collapsed }\n    this.props.onChange(newValue)\n  }\n\n  renderFormField (blockInfo, field, idx) {\n    const value = blockInfo.data[field.name]\n    let placeholder = field.default\n    const Widget = getWidgetComponentWithFallback(field.type)\n    if (Widget.deserializeValue && placeholder != null) {\n      placeholder = Widget.deserializeValue(placeholder, field.type)\n    }\n\n    const onChange = (value) => {\n      blockInfo.data[field.name] = value\n      this.props.onChange([...this.props.value])\n    }\n\n    return (\n      <FieldBox\n        key={idx}\n        value={value}\n        placeholder={placeholder}\n        field={field}\n        onChange={onChange}\n      />\n    )\n  }\n\n  renderBlocks () {\n    return this.props.value.map((blockInfo, idx) => {\n      // bad block is no block\n      if (blockInfo === null) {\n        return null\n      }\n\n      const fields = blockInfo.collapsed\n        ? null\n        : (\n          <FieldRows\n            fields={blockInfo.flowBlockModel.fields}\n            renderFunc={this.renderFormField.bind(this, blockInfo)}\n          />\n        )\n\n      return (\n        <div key={blockInfo.localId} className='flow-block'>\n          <div className='btn-group action-bar'>\n            <button\n              type='button'\n              className='btn btn-default btn-xs'\n              title={blockInfo.collapsed ? i18n.trans('Expand') : i18n.trans('Collapse')}\n              onClick={this.toggleBlock.bind(this, idx)}\n            >\n              <i className={blockInfo.collapsed ? 'fa fa-expand' : 'fa fa-compress'} />\n            </button>\n            <button\n              type='button'\n              className='btn btn-default btn-xs'\n              title={i18n.trans('UP')}\n              disabled={idx === 0}\n              onClick={this.moveBlock.bind(this, idx, -1)}\n            >\n              <i className='fa fa-fw fa-chevron-up' />\n            </button>\n            <button\n              type='button'\n              className='btn btn-default btn-xs'\n              title={i18n.trans('DOWN')}\n              disabled={idx >= this.props.value.length - 1}\n              onClick={this.moveBlock.bind(this, idx, 1)}\n            >\n              <i className='fa fa-fw fa-chevron-down' />\n            </button>\n            <button\n              type='button'\n              className='btn btn-default btn-xs'\n              title={i18n.trans('REMOVE')}\n              onClick={this.removeBlock.bind(this, idx)}\n            >\n              <i className='fa fa-fw fa-times' />\n            </button>\n          </div>\n          <h4 className='block-name'>{userLabel.format(blockInfo.flowBlockModel.name_i18n)}</h4>\n          {fields}\n        </div>\n      )\n    })\n  }\n\n  render () {\n    const addBlockButtons = this.props.type.flowblock_order.map((key) => {\n      const flowBlockModel = this.props.type.flowblocks[key]\n      const label = flowBlockModel.button_label\n        ? userLabel.format(flowBlockModel.button_label)\n        : userLabel.format(flowBlockModel.name_i18n)\n      return (\n        <button\n          type='button'\n          className='btn btn-default'\n          onClick={this.addNewBlock.bind(this, key)}\n          title={i18n.trans(flowBlockModel.name_i18n)}\n          key={flowBlockModel.id}\n        >{label}\n        </button>\n      )\n    })\n\n    return (\n      <div className='flow'>\n        {this.renderBlocks()}\n        <div className='add-block'>\n          <label>{i18n.trans('ADD_FLOWBLOCK') + ': '}</label>\n          <div className='btn-group'>\n            {addBlockButtons}\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\nFlowWidget.propTypes = widgetPropTypes\n","import PropTypes from 'prop-types'\n\nexport const widgetPropTypes = {\n  value: PropTypes.any,\n  type: PropTypes.object,\n  placeholder: PropTypes.any,\n  onChange: PropTypes.any,\n  disabled: PropTypes.bool\n}\n\nexport function getInputClass (type) {\n  let rv = 'form-control'\n  if (type.size === 'small') {\n    rv = 'input-sm ' + rv\n  } else if (type.size === 'large') {\n    rv = 'input-lg ' + rv\n  }\n  return rv\n}\n","'use strict'\n\nimport React from 'react'\nimport { flipSetValue } from '../utils'\nimport i18n from '../i18n'\nimport { getInputClass, widgetPropTypes } from './mixins'\n\nfunction checkboxIsActive (field, props) {\n  let value = props.value\n  if (value == null) {\n    value = props.placeholder\n    if (value == null) {\n      return false\n    }\n  }\n  for (const item of value) {\n    if (item === field) {\n      return true\n    }\n  }\n  return false\n}\n\nexport class CheckboxesInputWidget extends React.PureComponent {\n  static serializeValue (value) {\n    return (value || '').join(', ')\n  }\n\n  static deserializeValue (value) {\n    if (value === '') {\n      return null\n    }\n    let rv = value.split(',').map((x) => {\n      return x.match(/^\\s*(.*?)\\s*$/)[1]\n    })\n    if (rv.length === 1 && rv[0] === '') {\n      rv = []\n    }\n    return rv\n  }\n\n  render () {\n    let { className, value, placeholder, type, onChange, ...otherProps } = this.props\n    className = (className || '') + ' checkbox'\n\n    function onChangeHandler (field, event) {\n      const newValue = flipSetValue(this.props.value, field, event.target.checked)\n      onChange(newValue)\n    }\n\n    const choices = type.choices.map((item) => (\n      <div className={className} key={item[0]}>\n        <label>\n          <input\n            type='checkbox'\n            {...otherProps}\n            checked={checkboxIsActive(item[0], this.props)}\n            onChange={(e) => onChangeHandler(item[0], e)}\n          />\n          {i18n.trans(item[1])}\n        </label>\n      </div>\n    ))\n    return (\n      <div className='checkboxes'>\n        {choices}\n      </div>\n    )\n  }\n}\nCheckboxesInputWidget.propTypes = widgetPropTypes\n\nexport function SelectInputWidget (props) {\n  const { className, type, value, placeholder, onChange, ...otherProps } = props\n\n  const choices = type.choices.map((item) => (\n    <option key={item[0]} value={item[0]}>\n      {i18n.trans(item[1])}\n    </option>\n  ))\n\n  return (\n    <div className='form-group'>\n      <div className={className}>\n        <select\n          className={getInputClass(type)}\n          value={value || placeholder || ''}\n          onChange={(e) => onChange(e.target.value)}\n          {...otherProps}\n        >\n          <option key='' value=''>----</option>\n          {choices}\n        </select>\n      </div>\n    </div>\n  )\n}\nSelectInputWidget.propTypes = widgetPropTypes\n","'use strict'\n\nimport React from 'react'\nimport { getInputClass, widgetPropTypes } from './mixins'\nimport { isValidUrl } from '../utils'\nimport userLabel from '../userLabel'\nimport i18n from '../i18n'\n\nconst isTrue = (value) => {\n  return value === 'true' || value === 'yes' || value === '1'\n}\n\nconst isValidDate = (year, month, day) => {\n  year = parseInt(year, 10)\n  month = parseInt(month, 10)\n  day = parseInt(day, 10)\n  const date = new Date(year, month - 1, day)\n  if (date.getFullYear() === year &&\n      date.getMonth() === month - 1 &&\n      date.getDate() === day) {\n    return true\n  }\n  return false\n}\n\nfunction InputWidgetBase (props) {\n  const { type, value, onChange, postprocessValue, inputAddon, inputType, validate, disabled, placeholder } = props\n  let help = null\n  let className = 'input-group'\n  function onChangeHandler (event) {\n    let value = event.target.value\n    if (postprocessValue) {\n      value = postprocessValue(value)\n    }\n    onChange(value)\n  }\n\n  const failure = validate ? validate(value) : null\n  const setValidity = (el) => {\n    if (el) {\n      el.setCustomValidity(failure || '')\n    }\n  }\n  if (failure !== null) {\n    className += ' has-feedback has-error'\n    const valClassName = 'validation-block validation-block-error'\n    help = <div className={valClassName}>{failure}</div>\n  }\n\n  let addon = null\n  const configuredAddon = type.addon_label_i18n\n  if (configuredAddon) {\n    addon = userLabel.format(configuredAddon)\n  } else if (inputAddon) {\n    addon = inputAddon\n  }\n\n  return (\n    <div className='form-group'>\n      <div className={className}>\n        <input\n          ref={setValidity}\n          type={inputType}\n          disabled={disabled}\n          placeholder={placeholder}\n          className={getInputClass(type)}\n          onChange={onChangeHandler}\n          value={value || ''}\n        />\n        {addon ? <span className='input-group-addon'>{addon}</span> : null}\n      </div>\n      {help}\n    </div>\n  )\n}\n\nexport function SingleLineTextInputWidget (props) {\n  return <InputWidgetBase inputType='text' inputAddon={<i className='fa fa-paragraph' />} {...props} />\n}\nSingleLineTextInputWidget.propTypes = widgetPropTypes\n\nfunction postprocessSlug (value) {\n  return value.replace(/\\s+/g, '-')\n}\n\nexport function SlugInputWidget (props) {\n  return <InputWidgetBase inputType='text' inputAddon={<i className='fa fa-link' />} postprocessValue={postprocessSlug} {...props} />\n}\nSlugInputWidget.propTypes = widgetPropTypes\n\nfunction postprocessInteger (value) {\n  return value.match(/^\\s*(.*?)\\s*$/)[1]\n}\n\nfunction validateInteger (value) {\n  if (value && !value.match(/^-?\\d+$/)) {\n    return i18n.trans('ERROR_INVALID_NUMBER')\n  }\n  return null\n}\n\nexport function IntegerInputWidget (props) {\n  return <InputWidgetBase inputType='text' inputAddon='0' postprocessValue={postprocessInteger} validate={validateInteger} {...props} />\n}\nIntegerInputWidget.propTypes = widgetPropTypes\n\nfunction postprocessFloat (value) {\n  return value.match(/^\\s*(.*?)\\s*$/)[1]\n}\n\nfunction validateFloat (value) {\n  if (value && !value.match(/^[+,-]?\\d+[.]\\d+$/)) {\n    return i18n.trans('ERROR_INVALID_NUMBER')\n  }\n  return null\n}\n\nexport function FloatInputWidget (props) {\n  return <InputWidgetBase inputType='text' inputAddon='0.0' postprocessValue={postprocessFloat} validate={validateFloat} {...props} />\n}\nFloatInputWidget.propTypes = widgetPropTypes\n\nfunction postprocessDate (value) {\n  value = value.match(/^\\s*(.*?)\\s*$/)[1]\n  const match = value.match(/^(\\d{1,2})\\.(\\d{1,2})\\.(\\d{4})\\s*$/)\n  let day, month, year\n  if (match) {\n    day = parseInt(match[1], 10)\n    month = parseInt(match[2], 10)\n    year = parseInt(match[3], 10)\n    return (\n      year + '-' +\n      (month < 10 ? '0' : '') + month + '-' +\n      (day < 10 ? '0' : '') + day\n    )\n  }\n  return value\n}\n\nfunction validateDate (value) {\n  if (!value) {\n    return null\n  }\n\n  const match = value.match(/^\\s*(\\d{4})-(\\d{1,2})-(\\d{1,2})\\s*$/)\n  if (match && isValidDate(match[1], match[2], match[3])) {\n    return null\n  }\n\n  return i18n.trans('ERROR_INVALID_DATE')\n}\n\nexport function DateInputWidget (props) {\n  return <InputWidgetBase inputType='date' inputAddon={<i className='fa fa-calendar' />} postprocessValue={postprocessDate} validate={validateDate} {...props} />\n}\nDateInputWidget.propTypes = widgetPropTypes\n\nfunction validateUrl (value) {\n  if (value && !isValidUrl(value)) {\n    return i18n.trans('ERROR_INVALID_URL')\n  }\n  return null\n}\n\nexport function UrlInputWidget (props) {\n  return <InputWidgetBase inputType='text' inputAddon={<i className='fa fa-external-link' />} validate={validateUrl} {...props} />\n}\nUrlInputWidget.propTypes = widgetPropTypes\n\nexport class MultiLineTextInputWidget extends React.Component {\n  constructor (props) {\n    super(props)\n    this.recalculateSize = this.recalculateSize.bind(this)\n  }\n\n  onChange (event) {\n    this.recalculateSize()\n    this.props.onChange(event.target.value)\n  }\n\n  componentDidMount () {\n    this.recalculateSize()\n    window.addEventListener('resize', this.recalculateSize)\n  }\n\n  componentWillUnmount () {\n    window.removeEventListener('resize', this.recalculateSize)\n  }\n\n  componentDidUpdate (prevProps) {\n    this.recalculateSize()\n  }\n\n  isInAutoResizeMode () {\n    return this.props.rows === undefined\n  }\n\n  recalculateSize () {\n    if (!this.isInAutoResizeMode()) {\n      return\n    }\n    let diff\n    const node = this.refs.ta\n\n    if (window.getComputedStyle) {\n      const s = window.getComputedStyle(node)\n      if (s.getPropertyValue('box-sizing') === 'border-box' ||\n          s.getPropertyValue('-moz-box-sizing') === 'border-box' ||\n          s.getPropertyValue('-webkit-box-sizing') === 'border-box') {\n        diff = 0\n      } else {\n        diff = (\n          parseInt(s.getPropertyValue('padding-bottom') || 0, 10) +\n          parseInt(s.getPropertyValue('padding-top') || 0, 10)\n        )\n      }\n    } else {\n      diff = 0\n    }\n\n    const updateScrollPosition = node === document.activeElement\n    // Cross-browser compatibility for scroll position\n    const oldScrollTop = document.documentElement.scrollTop || document.body.scrollTop\n    const oldHeight = node.offsetHeight\n\n    node.style.height = 'auto'\n    const newHeight = (node.scrollHeight - diff)\n    node.style.height = newHeight + 'px'\n\n    if (updateScrollPosition) {\n      window.scrollTo(\n        document.body.scrollLeft, oldScrollTop + (newHeight - oldHeight))\n    }\n  }\n\n  render () {\n    const { type, value, placeholder, disabled } = this.props\n\n    const style = {}\n    if (this.isInAutoResizeMode()) {\n      style.display = 'block'\n      style.overflow = 'hidden'\n      style.resize = 'none'\n    }\n\n    return (\n      <div>\n        <textarea\n          ref='ta'\n          className={getInputClass(type)}\n          onChange={this.onChange.bind(this)}\n          style={style}\n          value={value}\n          disabled={disabled}\n          placeholder={placeholder}\n        />\n      </div>\n    )\n  }\n}\nMultiLineTextInputWidget.propTypes = widgetPropTypes\n\nexport class BooleanInputWidget extends React.Component {\n  constructor (props) {\n    super(props)\n    this.checkbox = React.createRef()\n  }\n\n  onChange (event) {\n    this.props.onChange(event.target.checked ? 'yes' : 'no')\n  }\n\n  componentDidMount () {\n    const checkbox = this.checkbox.current\n    if (!this.props.value && this.props.placeholder) {\n      checkbox.indeterminate = true\n      checkbox.checked = isTrue(this.props.placeholder)\n    } else {\n      checkbox.indeterminate = false\n    }\n  }\n\n  render () {\n    const { type, value, disabled } = this.props\n\n    return (\n      <div className='checkbox'>\n        <label>\n          <input\n            type='checkbox'\n            disabled={disabled}\n            ref={this.checkbox}\n            checked={isTrue(value)}\n            onChange={this.onChange.bind(this)}\n          />\n          {type.checkbox_label_i18n ? i18n.trans(type.checkbox_label_i18n) : null}\n        </label>\n      </div>\n    )\n  }\n}\nBooleanInputWidget.propTypes = widgetPropTypes\n"],"sourceRoot":""}